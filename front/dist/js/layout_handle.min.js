Graph.prototype.initChooseLayoutEvent=function(){var m=this,t=m.node_key,e=$("#sort-Selector");for(label in t){var o="<option value='"+t[label]+"'>"+t[label]+"</option>";e.append(o)}m.chooseLayoutSelector.change(function(t){var e=$(this).find("option:selected").val();if(m.layoutStartButton.removeClass("disabled"),$(".input-layout-option").remove(),0==e){var o=$("<input type='text' class='form-control layout-option input-layout-option' id='start-angle' placeholder='start angle eg:1.5'>"),n=$("<select class='custom-select layout-option input-layout-option' id='sort-Selector'></select>"),i=m.node_key;for(label in i){var a="<option value='"+i[label]+"'>"+i[label]+"</option>";n.append(a)}m.layoutOptionBox.prepend(n),m.layoutOptionBox.prepend(o)}else if(1!=e)if(2==e){var l=$("<input type='text' class='form-control layout-option input-layout-option' id='gird-cols' placeholder='cols eg:100'>"),r=$("<input type='text' class='form-control layout-option input-layout-option' id='gird-rows' placeholder='rows eg:100'>");m.layoutOptionBox.prepend(r),m.layoutOptionBox.prepend(l)}else if(3==e){o=$("<input type='text' class='form-control layout-option input-layout-option' id='start-angle' placeholder='start angle eg:1.5'>"),n=$("<select class='custom-select layout-option input-layout-option' id='sort-Selector'></select>");var p=m.node_key;n=m.initOptions(n,p),m.layoutOptionBox.prepend(n),m.layoutOptionBox.prepend(o)}else if(4==e){var s=$("<select class='custom-select layout-option input-layout-option' id='is-circle'></select>"),u=$("<input type='text' class='form-control layout-option input-layout-option' id='root-node-id' placeholder='root-nodes-id:  please join id with ? eg:1?2?8'>");u.attr("data-inputmask","'mask':999-999-9999");p=[!0,!1];s=m.initOptions(s,p),m.layoutOptionBox.prepend(u),m.layoutOptionBox.prepend(s)}else if(5==e){var c=$("<input type='text' class='form-control layout-option input-layout-option' id='refresh-input' placeholder='refresh times eg:20'>"),d=$("<input type='text' class='form-control layout-option input-layout-option' id='gravity-input' placeholder='gravity eg:1.0'>");m.layoutOptionBox.prepend(d),m.layoutOptionBox.prepend(c)}else if(6!=e&&7!=e)if(8==e){var y=$("<input type='text' class='form-control layout-option input-layout-option' id='hooke-input' placeholder='Hooke law coefficient on [0,1] eg:0.008'>"),f=$("<input type='text' class='form-control layout-option input-layout-option' id='springlength-input' placeholder='Spring ideal length on eg:80'>");m.layoutOptionBox.prepend(f),m.layoutOptionBox.prepend(y)}else if(9==e){var v=$("<input type='text' class='form-control layout-option input-layout-option' id='edgelength-input' placeholder='Edge ideal length on eg:50'>"),g=$("<input type='text' class='form-control layout-option input-layout-option' id='maxnumiter-input' placeholder='max iter num eg: 2500'>");m.layoutOptionBox.prepend(g),m.layoutOptionBox.prepend(v)}})},Graph.prototype.startLayout=function(){var C=this;C.layoutStartButton.click(function(){event.preventDefault();var t=$(C.chooseLayoutSelector).find("option:selected").val();if(0==t){var e=$("#start-angle"),o=$("#sort-Selector");if(C.isElementSuccessfullyGet(e,o))var n=e.val(),i=o.val(),a={name:"circle",startAngle:(n=""==n?0:2-(n=parseFloat(n)))*Math.PI,sort:function(t,e){return t.data(i)-e.data(i)}}}else if(1==t)a={name:"random"};else if(2==t){var l=$("#gird-cols"),r=$("#gird-rows");if(C.isElementSuccessfullyGet(l,r)){var p=r.val(),s=l.val();""!=p&&""!=s?(p=parseInt(p),s=parseInt(s)):(""==p&&(p=void 0),""==s&&(s=void 0)),a={name:"grid",rows:p,cols:s}}}else if(3==t){e=$("#start-angle"),o=$("#sort-Selector");if(C.isElementSuccessfullyGet(e,o))n=e.val(),i=o.val(),a={name:"concentric",startAngle:(n=""==n?0:2-(n=parseFloat(n)))*Math.PI,sort:function(t,e){return t.data(i)-e.data(i)}}}else if(4==t){var u=$("#is-circle"),c=$("#root-node-id");if(C.isElementSuccessfullyGet(u,c)){var d=u.val();d="true"==d||"false"!=d&&void 0;var y=c.val();if(""==y)var f=void 0;else{var v=y.split("?"),g=[];for(id in v){var m="#"+v[id];g[id]=m}f=g.join(",")}if(null==f)var h=void 0;else h=C.cy.$(f);a={name:"breadthfirst",roots:h,circle:d}}}else if(5==t){var x=$("#refresh-input"),O=$("#gravity-input");if(C.isElementSuccessfullyGet(x,O)){var k=x.val(),B=O.val();""!=k&&""!=B?(k=parseInt(k),B=parseInt(B)):(""==k&&(k=20),""==B&&(B=1));a={name:"cose"}}}else if(6==t){var b=C.node_key;if(-1<b.indexOf("posX")&&b.indexOf("posY"))a={name:"preset",positions:function(t){var e=t.data("posX"),o=t.data("posY");return console.log(e),console.log(o),{x:e,y:o}}};else $(this).addClass("disabled")}else if(7==t)a={name:"d3-force",animate:!1,fit:!0,linkId:function(t){return t.id},linkDistance:100,manyBodyStrength:-600,randomize:!1,infinite:!1};else if(8==t){var S=$("#hooke-input"),G=$("#springlength-input"),_=S.val(),w=G.val();_=""==_?.008:parseFloat(_);a={name:"euler",springLength:w=""==w?80:parseFloat(w),springCoeff:_}}else if(9==t){var E=$("#edgelength-input"),I=$("#maxnumiter-input"),F=E.val(),L=I.val();a={name:"fcose",idealEdgeLength:F=""==F?50:parseFloat(F),numIter:L=""==L?2500:parseFloat(L)}}else if(10==t)a={name:"klay",animate:!0};else if(11==t)a={name:"spread"};else 12!=t&&13!=t&&14!=t||wnatajax.get({url:"/analysis/getlayout/",data:{id:C.id,layout:t},success:function(t){if(200==t.code){var o=t.data,e={name:"preset",positions:function(t){var e=t.id();return{x:o[e][0],y:o[e][1]}}};if(C.is_recombination_network())var n=C.cy.nodes(":child").union(C.cy.edges()).layout(e);else n=C.cy.layout(e);n.run()}},fail:function(t){}});if(12!=t&&13!=t&&14!=t){if(C.is_recombination_network())var j=C.cy.nodes(":child").union(C.cy.edges()).layout(a);else j=C.cy.layout(a);j.run()}})},Graph.prototype.is_recombination_network=function(){return-1<this.node_key.indexOf("parent")},Graph.prototype.initResetControl=function(){var t=this;t.resetButton.click(function(){event.preventDefault(),t.cy.fit(t.container)})},Graph.prototype.isElementSuccessfullyGet=function(t,e){return NaN!=t.val()&&"object"==typeof t&&NaN!=e.val()&&"object"==typeof e},Graph.prototype.toastsInfo=function(t,e,o){$(document).Toasts("create",{class:"bg-success",title:t,subtitle:e,position:"topRight",body:o})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxheW91dF9oYW5kbGUuanMiXSwibmFtZXMiOlsiR3JhcGgiLCJwcm90b3R5cGUiLCJpbml0Q2hvb3NlTGF5b3V0RXZlbnQiLCJzZWxmIiwidGhpcyIsImxhYmVscyIsIm5vZGVfa2V5Iiwic2VsZWN0b3IiLCIkIiwibGFiZWwiLCJvcHRpb25zIiwiYXBwZW5kIiwiY2hvb3NlTGF5b3V0U2VsZWN0b3IiLCJjaGFuZ2UiLCJldmVudCIsInZhbHVlIiwiZmluZCIsInZhbCIsImxheW91dFN0YXJ0QnV0dG9uIiwicmVtb3ZlQ2xhc3MiLCJyZW1vdmUiLCJzdGFyeUFuZ2xlSW5wdXQiLCJzb3J0U2VsZWN0b3IiLCJsYXlvdXRPcHRpb25Cb3giLCJwcmVwZW5kIiwiY29sc0lucHV0Iiwicm93c0lucHV0IiwibGlzdHMiLCJpbml0T3B0aW9ucyIsImlzQ2lyY2xlU2VsZWN0b3IiLCJyb290SW5wdXQiLCJhdHRyIiwicmVmcmVzaElucHV0IiwiZ3Jhdml0eUlucHV0IiwiaG9va2VDb2ZmaWNpZW50Iiwic3ByaW5nTGVuZ3RoIiwiZWRnZUxlbmd0aCIsIm1heE51bUl0ZXIiLCJzdGFydExheW91dCIsImNsaWNrIiwicHJldmVudERlZmF1bHQiLCJzdGFydEFuZ2xlSW5wdXQiLCJpc0VsZW1lbnRTdWNjZXNzZnVsbHlHZXQiLCJBbmdsZSIsInNvcnRlciIsIm5hbWUiLCJzdGFydEFuZ2xlIiwicGFyc2VGbG9hdCIsIk1hdGgiLCJQSSIsInNvcnQiLCJhIiwiYiIsImRhdGEiLCJyb3ciLCJjb2wiLCJwYXJzZUludCIsInVuZGVmaW5lZCIsInJvd3MiLCJjb2xzIiwiaXNDaXJjbGVJbnB1dCIsImlzQ2lyY2xlIiwicm9vdF9pZCIsIm5vZGVfaW5kZXgiLCJpZHMiLCJzcGxpdCIsInJvb3RfaW5kZXgiLCJpZCIsImlkeCIsImpvaW4iLCJyb290cyIsImN5IiwiY2lyY2xlIiwicmVmcmVzaCIsImdyYXZpdHkiLCJpbmRleE9mIiwicG9zaXRpb25zIiwibm9kZSIsInBvc1giLCJwb3NZIiwiY29uc29sZSIsImxvZyIsIngiLCJ5IiwiYWRkQ2xhc3MiLCJhbmltYXRlIiwiZml0IiwibGlua0lkIiwiZCIsImxpbmtEaXN0YW5jZSIsIm1hbnlCb2R5U3RyZW5ndGgiLCJyYW5kb21pemUiLCJpbmZpbml0ZSIsImhvb2tDb2ZmaWNpZW50IiwiaG9vayIsImlkZWFsTGVuZ3RoIiwic3ByaW5nQ29lZmYiLCJlZGdlTGVuZ3RoSW5wdXQiLCJtYXhOdW1JbnB1dCIsImVkZ2VMZWd0aHZhbCIsImlkZWFsRWRnZUxlbmd0aCIsIm51bUl0ZXIiLCJ3bmF0YWpheCIsImdldCIsInVybCIsImxheW91dCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJjb3VudGVyIiwiaXNfcmVjb21iaW5hdGlvbl9uZXR3b3JrIiwibm9kZXMiLCJ1bmlvbiIsImVkZ2VzIiwicnVuIiwiZmFpbCIsImluaXRSZXNldENvbnRyb2wiLCJyZXNldEJ1dHRvbiIsImNvbnRhaW5lciIsIm9iamVjdDEiLCJvYmplY3QyIiwiTmFOIiwidG9hc3RzSW5mbyIsInRpdGxlIiwic3VidGl0bGUiLCJib2R5IiwiZG9jdW1lbnQiLCJUb2FzdHMiLCJjbGFzcyIsInBvc2l0aW9uIl0sIm1hcHBpbmdzIjoiQUFBQUEsTUFBTUMsVUFBVUMsc0JBQXdCLFdBQ3BDLElBQUlDLEVBQU9DLEtBQ1BDLEVBQVNGLEVBQUtHLFNBQ2RDLEVBQVdDLEVBQUUsa0JBQ2pCLElBQUtDLFNBQVNKLEVBQVEsQ0FDbEIsSUFBSUssRUFBVSxrQkFBb0JMLEVBQU9JLE9BQVMsS0FBT0osRUFBT0ksT0FBUyxZQUN6RUYsRUFBU0ksT0FBT0QsR0FFcEJQLEVBQUtTLHFCQUFxQkMsT0FBTyxTQUFVQyxHQUN2QyxJQUFJQyxFQUFRUCxFQUFFSixNQUFNWSxLQUFLLG1CQUFtQkMsTUFJNUMsR0FIQWQsRUFBS2Usa0JBQWtCQyxZQUFZLFlBQ25DWCxFQUFFLHdCQUF3QlksU0FFYixHQUFUTCxFQUFZLENBR1osSUFBSU0sRUFBa0JiLEVBQUUsZ0lBQ3BCYyxFQUFlZCxFQUFF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QUdaLEVBQUswRywyQkFDSixJQUFJSixFQUFVdEcsRUFBS29FLEdBQUd1QyxNQUFNLFVBQVVDLE1BQU01RyxFQUFLb0UsR0FBR3lDLFNBQVVQLE9BQU8vRixRQUVqRStGLEVBQVN0RyxFQUFLb0UsR0FBR2tDLE9BQU8vRixHQUVoQytGLEVBQU9RLFVBS25CakgsTUFBTUMsVUFBVTRHLHlCQUEyQixXQUV2QyxPQUFzQyxFQUQzQnpHLEtBQ0hFLFNBQVNxRSxRQUFRLFdBUTdCM0UsTUFBTUMsVUFBVWtILGlCQUFtQixXQUMvQixJQUFJaEgsRUFBT0MsS0FDWEQsRUFBS2lILFlBQVk3RSxNQUFNLFdBQ25CekIsTUFBTTBCLGlCQUNOckMsRUFBS29FLEdBQUdlLElBQUluRixFQUFLa0gsY0FJekJySCxNQUFNQyxVQUFVeUMseUJBQTJCLFNBQVU0RSxFQUFTQyxHQUMxRCxPQUFzQkMsS0FBakJGLEVBQVFyRyxPQUFvQyxpQkFBYixHQUE0Q3VHLEtBQWpCRCxFQUFRdEcsT0FBb0MsaUJBQWIsR0FPbEdqQixNQUFNQyxVQUFVd0gsV0FBYSxTQUFTQyxFQUFNQyxFQUFTQyxHQUNqRHBILEVBQUVxSCxVQUFVQyxPQUFPLFNBQVUsQ0FDekJDLE1BQU8sYUFDUEwsTUFBT0EsRUFDUEMsU0FBVUEsRUFDVkssU0FBVSxXQUNWSixLQUFNQSIsImZpbGUiOiJsYXlvdXRfaGFuZGxlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIkdyYXBoLnByb3RvdHlwZS5pbml0Q2hvb3NlTGF5b3V0RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgbGFiZWxzID0gc2VsZi5ub2RlX2tleTtcclxuICAgIHZhciBzZWxlY3RvciA9ICQoXCIjc29ydC1TZWxlY3RvclwiKTtcclxuICAgIGZvciAobGFiZWwgaW4gbGFiZWxzKSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBcIjxvcHRpb24gdmFsdWU9J1wiICsgbGFiZWxzW2xhYmVsXSArIFwiJz5cIiArIGxhYmVsc1tsYWJlbF0gKyBcIjwvb3B0aW9uPlwiO1xyXG4gICAgICAgIHNlbGVjdG9yLmFwcGVuZChvcHRpb25zKTtcclxuICAgIH07XHJcbiAgICBzZWxmLmNob29zZUxheW91dFNlbGVjdG9yLmNoYW5nZShmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSAkKHRoaXMpLmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikudmFsKCk7XHJcbiAgICAgICAgc2VsZi5sYXlvdXRTdGFydEJ1dHRvbi5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICQoXCIuaW5wdXQtbGF5b3V0LW9wdGlvblwiKS5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgaWYgKHZhbHVlID09IDApIHtcclxuICAgICAgICAgICAgLy9jaXJjbGVcclxuICAgICAgICAgICAgLy9zdGFydGFuZ2xlIHNvcnRcclxuICAgICAgICAgICAgdmFyIHN0YXJ5QW5nbGVJbnB1dCA9ICQoXCI8aW5wdXQgdHlwZT0ndGV4dCcgY2xhc3M9J2Zvcm0tY29udHJvbCBsYXlvdXQtb3B0aW9uIGlucHV0LWxheW91dC1vcHRpb24nIGlkPSdzdGFydC1hbmdsZScgcGxhY2Vob2xkZXI9J3N0YXJ0IGFuZ2xlIGVnOjEuNSc+XCIpO1xyXG4gICAgICAgICAgICB2YXIgc29ydFNlbGVjdG9yID0gJChcIjxzZWxlY3QgY2xhc3M9J2N1c3RvbS1zZWxlY3QgbGF5b3V0LW9wdGlvbiBpbnB1dC1sYXlvdXQtb3B0aW9uJyBpZD0nc29ydC1TZWxlY3Rvcic+PC9zZWxlY3Q+XCIpO1xyXG4gICAgICAgICAgICB2YXIgbGFiZWxzID0gc2VsZi5ub2RlX2tleTtcclxuICAgICAgICAgICAgZm9yIChsYWJlbCBpbiBsYWJlbHMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gXCI8b3B0aW9uIHZhbHVlPSdcIiArIGxhYmVsc1tsYWJlbF0gKyBcIic+XCIgKyBsYWJlbHNbbGFiZWxdICsgXCI8L29wdGlvbj5cIjtcclxuICAgICAgICAgICAgICAgIHNvcnRTZWxlY3Rvci5hcHBlbmQob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHNlbGYubGF5b3V0T3B0aW9uQm94LnByZXBlbmQoc29ydFNlbGVjdG9yKTtcclxuICAgICAgICAgICAgc2VsZi5sYXlvdXRPcHRpb25Cb3gucHJlcGVuZChzdGFyeUFuZ2xlSW5wdXQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gMSkge1xyXG4gICAgICAgICAgICAvL3JhbmRvbVxyXG4gICAgICAgICAgICAvL+aXoOS7u+S9leaTjeS9nFxyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gMikge1xyXG4gICAgICAgICAgICAvL0dpcmRcclxuICAgICAgICAgICAgLy9jb2xzIGFuZCByb3dzXHJcbiAgICAgICAgICAgIHZhciBjb2xzSW5wdXQgPSAkKFwiPGlucHV0IHR5cGU9J3RleHQnIGNsYXNzPSdmb3JtLWNvbnRyb2wgbGF5b3V0LW9wdGlvbiBpbnB1dC1sYXlvdXQtb3B0aW9uJyBpZD0nZ2lyZC1jb2xzJyBwbGFjZWhvbGRlcj0nY29scyBlZzoxMDAnPlwiKTtcclxuICAgICAgICAgICAgdmFyIHJvd3NJbnB1dCA9ICQoXCI8aW5wdXQgdHlwZT0ndGV4dCcgY2xhc3M9J2Zvcm0tY29udHJvbCBsYXlvdXQtb3B0aW9uIGlucHV0LWxheW91dC1vcHRpb24nIGlkPSdnaXJkLXJvd3MnIHBsYWNlaG9sZGVyPSdyb3dzIGVnOjEwMCc+XCIpO1xyXG4gICAgICAgICAgICBzZWxmLmxheW91dE9wdGlvbkJveC5wcmVwZW5kKHJvd3NJbnB1dCk7XHJcbiAgICAgICAgICAgIHNlbGYubGF5b3V0T3B0aW9uQm94LnByZXBlbmQoY29sc0lucHV0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09IDMpIHtcclxuICAgICAgICAgICAgLy9jb25jZW50cmljXHJcbiAgICAgICAgICAgIC8vc3RhcnRhbmdsZSBjb25jZW50cmljXHJcbiAgICAgICAgICAgIHZhciBzdGFyeUFuZ2xlSW5wdXQgPSAkKFwiPGlucHV0IHR5cGU9J3RleHQnIGNsYXNzPSdmb3JtLWNvbnRyb2wgbGF5b3V0LW9wdGlvbiBpbnB1dC1sYXlvdXQtb3B0aW9uJyBpZD0nc3RhcnQtYW5nbGUnIHBsYWNlaG9sZGVyPSdzdGFydCBhbmdsZSBlZzoxLjUnPlwiKTtcclxuICAgICAgICAgICAgdmFyIHNvcnRTZWxlY3RvciA9ICQoXCI8c2VsZWN0IGNsYXNzPSdjdXN0b20tc2VsZWN0IGxheW91dC1vcHRpb24gaW5wdXQtbGF5b3V0LW9wdGlvbicgaWQ9J3NvcnQtU2VsZWN0b3InPjwvc2VsZWN0PlwiKTtcclxuICAgICAgICAgICAgdmFyIGxpc3RzID0gc2VsZi5ub2RlX2tleTtcclxuICAgICAgICAgICAgc29ydFNlbGVjdG9yID0gc2VsZi5pbml0T3B0aW9ucyhzb3J0U2VsZWN0b3IsIGxpc3RzKTtcclxuICAgICAgICAgICAgc2VsZi5sYXlvdXRPcHRpb25Cb3gucHJlcGVuZChzb3J0U2VsZWN0b3IpO1xyXG4gICAgICAgICAgICBzZWxmLmxheW91dE9wdGlvbkJveC5wcmVwZW5kKHN0YXJ5QW5nbGVJbnB1dCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSA0KSB7XHJcbiAgICAgICAgICAgIC8vQnJlYWR0aGZpcnN0XHJcbiAgICAgICAgICAgIC8vY2lyY2xlIGFuZCByb290XHJcbiAgICAgICAgICAgIHZhciBpc0NpcmNsZVNlbGVjdG9yID0gJChcIjxzZWxlY3QgY2xhc3M9J2N1c3RvbS1zZWxlY3QgbGF5b3V0LW9wdGlvbiBpbnB1dC1sYXlvdXQtb3B0aW9uJyBpZD0naXMtY2lyY2xlJz48L3NlbGVjdD5cIik7XHJcbiAgICAgICAgICAgIHZhciByb290SW5wdXQgPSAkKFwiPGlucHV0IHR5cGU9J3RleHQnIGNsYXNzPSdmb3JtLWNvbnRyb2wgbGF5b3V0LW9wdGlvbiBpbnB1dC1sYXlvdXQtb3B0aW9uJyBpZD0ncm9vdC1ub2RlLWlkJyBwbGFjZWhvbGRlcj0ncm9vdC1ub2Rlcy1pZDogIHBsZWFzZSBqb2luIGlkIHdpdGggPyBlZzoxPzI/OCc+XCIpO1xyXG5cclxuICAgICAgICAgICAgcm9vdElucHV0LmF0dHIoJ2RhdGEtaW5wdXRtYXNrJywgXCInbWFzayc6OTk5LTk5OS05OTk5XCIpO1xyXG4gICAgICAgICAgICB2YXIgbGlzdHMgPSBbdHJ1ZSwgZmFsc2VdO1xyXG4gICAgICAgICAgICBpc0NpcmNsZVNlbGVjdG9yID0gc2VsZi5pbml0T3B0aW9ucyhpc0NpcmNsZVNlbGVjdG9yLCBsaXN0cyk7XHJcbiAgICAgICAgICAgIHNlbGYubGF5b3V0T3B0aW9uQm94LnByZXBlbmQocm9vdElucHV0KTtcclxuICAgICAgICAgICAgc2VsZi5sYXlvdXRPcHRpb25Cb3gucHJlcGVuZChpc0NpcmNsZVNlbGVjdG9yKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09IDUpIHtcclxuICAgICAgICAgICAgLy8gLy8gY29zZSByZWZyZXNoIGFuZCBncmF2aXR5OlxyXG4gICAgICAgICAgICAvLyB2YXIgcmVmcmVzaElucHV0ID0gJChcIiNyZWZyZXNoLWlucHV0XCIpO1xyXG4gICAgICAgICAgICAvLyB2YXIgZ3Jhdml0eUlucHV0ID0gJChcIiNncmF2aXR5LWlucHV0XCIpO1xyXG4gICAgICAgICAgICB2YXIgcmVmcmVzaElucHV0ID0gJChcIjxpbnB1dCB0eXBlPSd0ZXh0JyBjbGFzcz0nZm9ybS1jb250cm9sIGxheW91dC1vcHRpb24gaW5wdXQtbGF5b3V0LW9wdGlvbicgaWQ9J3JlZnJlc2gtaW5wdXQnIHBsYWNlaG9sZGVyPSdyZWZyZXNoIHRpbWVzIGVnOjIwJz5cIik7XHJcbiAgICAgICAgICAgIHZhciBncmF2aXR5SW5wdXQgPSAkKFwiPGlucHV0IHR5cGU9J3RleHQnIGNsYXNzPSdmb3JtLWNvbnRyb2wgbGF5b3V0LW9wdGlvbiBpbnB1dC1sYXlvdXQtb3B0aW9uJyBpZD0nZ3Jhdml0eS1pbnB1dCcgcGxhY2Vob2xkZXI9J2dyYXZpdHkgZWc6MS4wJz5cIik7XHJcbiAgICAgICAgICAgIHNlbGYubGF5b3V0T3B0aW9uQm94LnByZXBlbmQoZ3Jhdml0eUlucHV0KTtcclxuICAgICAgICAgICAgc2VsZi5sYXlvdXRPcHRpb25Cb3gucHJlcGVuZChyZWZyZXNoSW5wdXQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gNikge1xyXG4gICAgICAgICAgICAvL1ByZXNldFxyXG4gICAgICAgICAgICAvL3h5XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSA3KSB7XHJcbiAgICAgICAgICAgIC8vZDMtZm9yY2VcclxuICAgICAgICAgICAgLy/ml6DlpITnkIZcclxuXHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSA4KSB7XHJcbiAgICAgICAgICAgIC8vZXVsZXJcclxuICAgICAgICAgICAgLy/og6Hlj6/lrprlvovnmoTns7vmlbBcclxuICAgICAgICAgICAgLy9Ib29rZSdzIGxhdyBjb2VmZmljaWVudFxyXG4gICAgICAgICAgICAvLyDph43liptcclxuICAgICAgICAgICAgLy8gTWFrZXMgdGhlIG5vZGVzIHJlcGVsIGVhY2ggb3RoZXIgZm9yIG5lZ2F0aXZlIHZhbHVlc1xyXG4gICAgICAgICAgICAvLyBNYWtlcyB0aGUgbm9kZXMgYXR0cmFjdCBlYWNoIG90aGVyIGZvciBwb3NpdGl2ZSB2YWx1ZXNcclxuICAgICAgICAgICAgdmFyIGhvb2tlQ29mZmljaWVudCA9ICQoXCI8aW5wdXQgdHlwZT0ndGV4dCcgY2xhc3M9J2Zvcm0tY29udHJvbCBsYXlvdXQtb3B0aW9uIGlucHV0LWxheW91dC1vcHRpb24nIGlkPSdob29rZS1pbnB1dCcgcGxhY2Vob2xkZXI9J0hvb2tlIGxhdyBjb2VmZmljaWVudCBvbiBbMCwxXSBlZzowLjAwOCc+XCIpO1xyXG4gICAgICAgICAgICB2YXIgc3ByaW5nTGVuZ3RoID0gJChcIjxpbnB1dCB0eXBlPSd0ZXh0JyBjbGFzcz0nZm9ybS1jb250cm9sIGxheW91dC1vcHRpb24gaW5wdXQtbGF5b3V0LW9wdGlvbicgaWQ9J3NwcmluZ2xlbmd0aC1pbnB1dCcgcGxhY2Vob2xkZXI9J1NwcmluZyBpZGVhbCBsZW5ndGggb24gZWc6ODAnPlwiKTtcclxuICAgICAgICAgICAgc2VsZi5sYXlvdXRPcHRpb25Cb3gucHJlcGVuZChzcHJpbmdMZW5ndGgpO1xyXG4gICAgICAgICAgICBzZWxmLmxheW91dE9wdGlvbkJveC5wcmVwZW5kKGhvb2tlQ29mZmljaWVudCk7XHJcblxyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gOSkge1xyXG4gICAgICAgICAgICAvL2Zjb3NlXHJcbiAgICAgICAgICAgIC8vIE1heGltdW0gbnVtYmVyIG9mIGl0ZXJhdGlvbnMgdG8gcGVyZm9ybSAgbnVtSXRlcjogMjUwMCxcclxuICAgICAgICAgICAgdmFyIGVkZ2VMZW5ndGggPSAkKFwiPGlucHV0IHR5cGU9J3RleHQnIGNsYXNzPSdmb3JtLWNvbnRyb2wgbGF5b3V0LW9wdGlvbiBpbnB1dC1sYXlvdXQtb3B0aW9uJyBpZD0nZWRnZWxlbmd0aC1pbnB1dCcgcGxhY2Vob2xkZXI9J0VkZ2UgaWRlYWwgbGVuZ3RoIG9uIGVnOjUwJz5cIik7XHJcbiAgICAgICAgICAgIHZhciBtYXhOdW1JdGVyID0gJChcIjxpbnB1dCB0eXBlPSd0ZXh0JyBjbGFzcz0nZm9ybS1jb250cm9sIGxheW91dC1vcHRpb24gaW5wdXQtbGF5b3V0LW9wdGlvbicgaWQ9J21heG51bWl0ZXItaW5wdXQnIHBsYWNlaG9sZGVyPSdtYXggaXRlciBudW0gZWc6IDI1MDAnPlwiKTtcclxuICAgICAgICAgICAgc2VsZi5sYXlvdXRPcHRpb25Cb3gucHJlcGVuZChtYXhOdW1JdGVyKTtcclxuICAgICAgICAgICAgc2VsZi5sYXlvdXRPcHRpb25Cb3gucHJlcGVuZChlZGdlTGVuZ3RoKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAxMCkge1xyXG4gICAgICAgICAgICAvL2tsYXlcclxuICAgICAgICAgICAgLy/ml6DlpITnkIZcclxuXHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAxMSkge1xyXG4gICAgICAgICAgICAvL3NwcmVhZFxyXG4gICAgICAgICAgICAvL+aXoOWkhOeQhlxyXG4gICAgICAgIH1lbHNlIGlmICh2YWx1ZSA9PSAxMil7XHJcbiAgICAgICAgICAgIC8vS0vnrpfms5VcclxuICAgICAgICB9ZWxzZSBpZih2YWx1ZSA9PSAxMyl7XHJcbiAgICAgICAgICAgIC8vRlLnrpfms5VcclxuICAgICAgICB9ZWxzZSBpZih2YWx1ZSA9PSAxNCl7XHJcbiAgICAgICAgICAgIC8vc3ByaWFs566X5rOVXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuXHJcbi8v54K55Ye7c3RhcnRsYXlvdXTnmoTngrnlh7vkuovku7ZcclxuR3JhcGgucHJvdG90eXBlLnN0YXJ0TGF5b3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgLy/liKTmlq1kYXRh6YeM6Z2i5aaC5p6c55SxcG9zWOWSjFBvc1nlrZfmrrVcclxuXHJcbiAgICBzZWxmLmxheW91dFN0YXJ0QnV0dG9uLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciB2YWx1ZSA9ICQoc2VsZi5jaG9vc2VMYXlvdXRTZWxlY3RvcikuZmluZChcIm9wdGlvbjpzZWxlY3RlZFwiKS52YWwoKTtcclxuXHJcbiAgICAgICAgaWYgKHZhbHVlID09IDApIHtcclxuICAgICAgICAgICAgdmFyIHN0YXJ0QW5nbGVJbnB1dCA9ICQoXCIjc3RhcnQtYW5nbGVcIik7XHJcbiAgICAgICAgICAgIHZhciBzb3J0U2VsZWN0b3IgPSAkKFwiI3NvcnQtU2VsZWN0b3JcIik7XHJcbiAgICAgICAgICAgIC8vY2lyY2llXHJcbiAgICAgICAgICAgIGlmIChzZWxmLmlzRWxlbWVudFN1Y2Nlc3NmdWxseUdldChzdGFydEFuZ2xlSW5wdXQsIHNvcnRTZWxlY3RvcikpIHtcclxuICAgICAgICAgICAgICAgIHZhciBBbmdsZSA9IHN0YXJ0QW5nbGVJbnB1dC52YWwoKTtcclxuICAgICAgICAgICAgICAgIHZhciBzb3J0ZXIgPSBzb3J0U2VsZWN0b3IudmFsKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoQW5nbGUgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBBbmdsZSA9IDA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIEFuZ2xlID0gcGFyc2VGbG9hdChBbmdsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgQW5nbGUgPSAyIC0gQW5nbGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnY2lyY2xlJyxcclxuICAgICAgICAgICAgICAgICAgICBzdGFydEFuZ2xlOiBBbmdsZSAqIE1hdGguUEksXHJcbiAgICAgICAgICAgICAgICAgICAgc29ydDogZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuZGF0YShzb3J0ZXIpIC0gYi5kYXRhKHNvcnRlcilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAxKSB7XHJcbiAgICAgICAgICAgIC8vcmFuZG9tXHJcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ3JhbmRvbSdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09IDIpIHtcclxuICAgICAgICAgICAgLy9ncmlkXHJcbiAgICAgICAgICAgIHZhciBjb2xzSW5wdXQgPSAkKFwiI2dpcmQtY29sc1wiKTtcclxuICAgICAgICAgICAgdmFyIHJvd3NJbnB1dCA9ICQoXCIjZ2lyZC1yb3dzXCIpO1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5pc0VsZW1lbnRTdWNjZXNzZnVsbHlHZXQoY29sc0lucHV0LCByb3dzSW5wdXQpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gcm93c0lucHV0LnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IGNvbHNJbnB1dC52YWwoKTtcclxuICAgICAgICAgICAgICAgIGlmIChyb3cgIT0gJycgJiYgY29sICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93ID0gcGFyc2VJbnQocm93KTtcclxuICAgICAgICAgICAgICAgICAgICBjb2wgPSBwYXJzZUludChjb2wpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm93ID09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbCA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZ3JpZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgcm93czogcm93LFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbHM6IGNvbCxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09IDMpIHtcclxuICAgICAgICAgICAgLy8vL2NvbmNlbnRyaWNcclxuICAgICAgICAgICAgdmFyIHN0YXJ0QW5nbGVJbnB1dCA9ICQoXCIjc3RhcnQtYW5nbGVcIik7XHJcbiAgICAgICAgICAgIHZhciBzb3J0U2VsZWN0b3IgPSAkKFwiI3NvcnQtU2VsZWN0b3JcIik7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmlzRWxlbWVudFN1Y2Nlc3NmdWxseUdldChzdGFydEFuZ2xlSW5wdXQsIHNvcnRTZWxlY3RvcikpIHtcclxuICAgICAgICAgICAgICAgIHZhciBBbmdsZSA9IHN0YXJ0QW5nbGVJbnB1dC52YWwoKTtcclxuICAgICAgICAgICAgICAgIHZhciBzb3J0ZXIgPSBzb3J0U2VsZWN0b3IudmFsKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoQW5nbGUgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBBbmdsZSA9IDA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIEFuZ2xlID0gcGFyc2VGbG9hdChBbmdsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgQW5nbGUgPSAyIC0gQW5nbGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnY29uY2VudHJpYycsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRBbmdsZTogQW5nbGUgKiBNYXRoLlBJLFxyXG4gICAgICAgICAgICAgICAgICAgIHNvcnQ6IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmRhdGEoc29ydGVyKSAtIGIuZGF0YShzb3J0ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gNCkge1xyXG4gICAgICAgICAgICAvL2JyZWFkdGhmaXJzdFxyXG4gICAgICAgICAgICB2YXIgaXNDaXJjbGVJbnB1dCA9ICQoXCIjaXMtY2lyY2xlXCIpO1xyXG4gICAgICAgICAgICB2YXIgcm9vdElucHV0ID0gJChcIiNyb290LW5vZGUtaWRcIik7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmlzRWxlbWVudFN1Y2Nlc3NmdWxseUdldChpc0NpcmNsZUlucHV0LCByb290SW5wdXQpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXNDaXJjbGUgPSBpc0NpcmNsZUlucHV0LnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzQ2lyY2xlID09ICd0cnVlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQ2lyY2xlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNDaXJjbGUgPT0gJ2ZhbHNlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQ2lyY2xlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQ2lyY2xlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHJvb3RfaWQgPSByb290SW5wdXQudmFsKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocm9vdF9pZCA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBub2RlX2luZGV4ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaWRzID0gcm9vdF9pZC5zcGxpdChcIj9cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvb3RfaW5kZXggPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGlkIGluIGlkcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gXCIjXCIgKyBpZHNbaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb290X2luZGV4W2lkXSA9IGlkeDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVfaW5kZXggPSByb290X2luZGV4LmpvaW4oXCIsXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChub2RlX2luZGV4ID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByb290cyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvb3RzID0gc2VsZi5jeS4kKG5vZGVfaW5kZXgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdicmVhZHRoZmlyc3QnLFxyXG4gICAgICAgICAgICAgICAgICAgIHJvb3RzOiByb290cyxcclxuICAgICAgICAgICAgICAgICAgICBjaXJjbGU6IGlzQ2lyY2xlXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSA1KSB7XHJcbiAgICAgICAgICAgIC8vY29zZSAgcmVmcmVzaC1pbnB1dCAgIGdyYXZpdHktaW5wdXRcclxuICAgICAgICAgICAgdmFyIHJlZnJlc2hJbnB1dCA9ICQoXCIjcmVmcmVzaC1pbnB1dFwiKTtcclxuICAgICAgICAgICAgdmFyIGdyYXZpdHlJbnB1dCA9ICQoXCIjZ3Jhdml0eS1pbnB1dFwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzZWxmLmlzRWxlbWVudFN1Y2Nlc3NmdWxseUdldChyZWZyZXNoSW5wdXQsIGdyYXZpdHlJbnB1dCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZWZyZXNoID0gcmVmcmVzaElucHV0LnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyYXZpdHkgPSBncmF2aXR5SW5wdXQudmFsKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlZnJlc2ggIT0gJycgJiYgZ3Jhdml0eSAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2ggPSBwYXJzZUludChyZWZyZXNoKTtcclxuICAgICAgICAgICAgICAgICAgICBncmF2aXR5ID0gcGFyc2VJbnQoZ3Jhdml0eSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWZyZXNoID09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2ggPSAyMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdyYXZpdHkgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3Jhdml0eSA9IDEuMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2Nvc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlZnJlc2g6cmVmcmVzaCxcclxuICAgICAgICAgICAgICAgICAgICAvLyBncmF2aXR5OmdyYXZpdHlcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09IDYpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBzZWxmLm5vZGVfa2V5O1xyXG4gICAgICAgICAgICB2YXIgZXhpc3RzID0gKChkYXRhLmluZGV4T2YoXCJwb3NYXCIpID4gLTEpICYmIChkYXRhLmluZGV4T2YoXCJwb3NZXCIpKSk7XHJcbiAgICAgICAgICAgIGlmIChleGlzdHMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwcmVzZXQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uczogZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvc1ggPSBub2RlLmRhdGEoXCJwb3NYXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zWSA9IG5vZGUuZGF0YShcInBvc1lcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBvc1gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwb3NZKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt4OiBwb3NYLCB5OiBwb3NZfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSA3KSB7XHJcbiAgICAgICAgICAgIC8vZDMtZm9yY2VcclxuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnZDMtZm9yY2UnLFxyXG4gICAgICAgICAgICAgICAgYW5pbWF0ZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBmaXQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBsaW5rSWQ6IGZ1bmN0aW9uIGlkKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5pZDtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBsaW5rRGlzdGFuY2U6IDEwMCxcclxuICAgICAgICAgICAgICAgIG1hbnlCb2R5U3RyZW5ndGg6IC02MDAsXHJcbiAgICAgICAgICAgICAgICByYW5kb21pemU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaW5maW5pdGU6IGZhbHNlLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gOCkge1xyXG4gICAgICAgICAgICAvL2V1bGVyXHJcbiAgICAgICAgICAgIHZhciBob29rQ29mZmljaWVudCA9ICQoXCIjaG9va2UtaW5wdXRcIik7XHJcbiAgICAgICAgICAgIHZhciBzcHJpbmdMZW5ndGggPSAkKFwiI3NwcmluZ2xlbmd0aC1pbnB1dFwiKTtcclxuICAgICAgICAgICAgdmFyIGhvb2sgPSBob29rQ29mZmljaWVudC52YWwoKTtcclxuICAgICAgICAgICAgdmFyIGlkZWFsTGVuZ3RoID0gc3ByaW5nTGVuZ3RoLnZhbCgpO1xyXG4gICAgICAgICAgICBpZiAoaG9vayA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgaG9vayA9IDAuMDA4O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaG9vayA9IHBhcnNlRmxvYXQoaG9vayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlkZWFsTGVuZ3RoID09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBpZGVhbExlbmd0aCA9IDgwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWRlYWxMZW5ndGggPSBwYXJzZUZsb2F0KGlkZWFsTGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdldWxlcicsXHJcbiAgICAgICAgICAgICAgICBzcHJpbmdMZW5ndGg6IGlkZWFsTGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgc3ByaW5nQ29lZmY6IGhvb2ssXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSA5KSB7XHJcbiAgICAgICAgICAgIC8vZmNvc2VcclxuICAgICAgICAgICAgdmFyIGVkZ2VMZW5ndGhJbnB1dCA9ICQoXCIjZWRnZWxlbmd0aC1pbnB1dFwiKTtcclxuICAgICAgICAgICAgdmFyIG1heE51bUlucHV0ID0gJChcIiNtYXhudW1pdGVyLWlucHV0XCIpO1xyXG4gICAgICAgICAgICB2YXIgZWRnZUxlZ3RodmFsID0gZWRnZUxlbmd0aElucHV0LnZhbCgpO1xyXG4gICAgICAgICAgICB2YXIgbWF4TnVtSXRlciA9IG1heE51bUlucHV0LnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGVkZ2VMZWd0aHZhbCA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgZWRnZUxlZ3RodmFsID0gNTA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBlZGdlTGVndGh2YWwgPSBwYXJzZUZsb2F0KGVkZ2VMZWd0aHZhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1heE51bUl0ZXIgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgIG1heE51bUl0ZXIgPSAyNTAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWF4TnVtSXRlciA9IHBhcnNlRmxvYXQobWF4TnVtSXRlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnZmNvc2UnLFxyXG4gICAgICAgICAgICAgICAgaWRlYWxFZGdlTGVuZ3RoOiBlZGdlTGVndGh2YWwsXHJcbiAgICAgICAgICAgICAgICBudW1JdGVyOiBtYXhOdW1JdGVyLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gMTApIHtcclxuICAgICAgICAgICAgLy9rbGF5XHJcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2tsYXknLFxyXG4gICAgICAgICAgICAgICAgYW5pbWF0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09IDExKSB7XHJcbiAgICAgICAgICAgIC8vc3ByZWFkXHJcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ3NwcmVhZCdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2UgaWYodmFsdWUgPT0gMTJ8fHZhbHVlPT0xM3x8dmFsdWU9PTE0KXtcclxuICAgICAgICAgICAgd25hdGFqYXguZ2V0KHtcclxuICAgICAgICAgICAgICAgICd1cmwnOlwiL2FuYWx5c2lzL2dldGxheW91dC9cIixcclxuICAgICAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICdpZCc6c2VsZi5pZCxcclxuICAgICAgICAgICAgICAgICAgICAnbGF5b3V0Jzp2YWx1ZVxyXG4gICAgICAgICAgICAgICAgfSwnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddPT0yMDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6XCJwcmVzZXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uczogZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRlciA9IG5vZGUuaWQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7eDogZGF0YVtjb3VudGVyXVswXSwgeTogZGF0YVtjb3VudGVyXVsxXX07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlbGYuaXNfcmVjb21iaW5hdGlvbl9uZXR3b3JrKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxheW91dCA9IChzZWxmLmN5Lm5vZGVzKCc6Y2hpbGQnKS51bmlvbihzZWxmLmN5LmVkZ2VzKCkpKS5sYXlvdXQob3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxheW91dCA9IHNlbGYuY3kubGF5b3V0KG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dC5ydW4oKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCdmYWlsJzpmdW5jdGlvbiAocmVzdWx0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZighKHZhbHVlID09IDEyfHx2YWx1ZT09MTN8fHZhbHVlPT0xNCkpe1xyXG4gICAgICAgICAgICBpZihzZWxmLmlzX3JlY29tYmluYXRpb25fbmV0d29yaygpKXtcclxuICAgICAgICAgICAgICAgIHZhciBsYXlvdXQgPSAoc2VsZi5jeS5ub2RlcygnOmNoaWxkJykudW5pb24oc2VsZi5jeS5lZGdlcygpKSkubGF5b3V0KG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHZhciBsYXlvdXQgPSBzZWxmLmN5LmxheW91dChvcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsYXlvdXQucnVuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5HcmFwaC5wcm90b3R5cGUuaXNfcmVjb21iaW5hdGlvbl9uZXR3b3JrID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIGlmKHNlbGYubm9kZV9rZXkuaW5kZXhPZihcInBhcmVudFwiKSA+IC0xKXtcclxuICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbn07XHJcblxyXG5cclxuR3JhcGgucHJvdG90eXBlLmluaXRSZXNldENvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnJlc2V0QnV0dG9uLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHNlbGYuY3kuZml0KHNlbGYuY29udGFpbmVyKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuR3JhcGgucHJvdG90eXBlLmlzRWxlbWVudFN1Y2Nlc3NmdWxseUdldCA9IGZ1bmN0aW9uIChvYmplY3QxLCBvYmplY3QyKSB7XHJcbiAgICBpZiAoKG9iamVjdDEudmFsKCkgIT0gTmFOICYmIHR5cGVvZiAob2JqZWN0MSkgPT0gXCJvYmplY3RcIikgJiYgKG9iamVjdDIudmFsKCkgIT0gTmFOICYmIHR5cGVvZiAob2JqZWN0MikgPT0gXCJvYmplY3RcIikpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59O1xyXG5cclxuR3JhcGgucHJvdG90eXBlLnRvYXN0c0luZm8gPSBmdW5jdGlvbih0aXRsZSxzdWJ0aXRsZSxib2R5KXtcclxuICAgICQoZG9jdW1lbnQpLlRvYXN0cygnY3JlYXRlJywge1xyXG4gICAgICAgIGNsYXNzOiAnYmctc3VjY2VzcycsXHJcbiAgICAgICAgdGl0bGU6IHRpdGxlLFxyXG4gICAgICAgIHN1YnRpdGxlOiBzdWJ0aXRsZSxcclxuICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICBib2R5OiBib2R5XHJcbiAgICAgIH0pO1xyXG59OyJdfQ==
