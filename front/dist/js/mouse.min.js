Graph.prototype.initTapEvent=function(){var r=this,d=$("#single-element-data");$("#total-elements-data").text("nodes:"+r.cy.nodes().size()/2+",edges:"+r.cy.edges().size()),r.cy.on("tap","node",function(e){var t=e.target,o=$('input[name="editCheckBox"]:checked'),i=$("input[name='entireCheckBox']:checked").val(),n="on"==o.val()&&null==i;if(r.is_recombination_network()){if(!t.isChild())return;n?(r.editNodeStyle(t),r.editTagStyle(t)):d.text("Type:node,id:"+t.id()+",degree:"+t.degree())}else n?r.editNodeStyle(t):d.text("Type:node,id:"+t.id()+",degree:"+t.degree())}),r.cy.on("tap","edge",function(e){var t=e.target,o=$('input[name="editCheckBox"]:checked'),i=$("input[name='entireCheckBox']:checked").val();"on"==o.val()&&null==i?r.editEdgeStyle(t):d.text("Type:edge,id:"+t.id()+",source:"+t.data("source")+",target:"+t.data("target"))}),r.isChoose=!1,r.cy.dblclick(),r.cy.on("dblclick","node",function(e){var t=e.target;if($('input[name="editCheckBox"]:checked').val()){var o=t.neighborhood();if(r.is_recombination_network()){var i=o.filter(":child");r.editTagStyle(i)}else i=o.filter("node");var n=o.filter("edge");r.editNodeStyle(i),r.editEdgeStyle(n)}else{if(t.isParent())return;i=r.cy.nodes(),n=r.cy.edges(),i.union(n);if(r.isChoose){if(r.sourceNode!=t){r.targetNode=t,r.isChoose=!1;var d=r.cy.elements().dijkstra(r.sourceNode,function(e){return 1}).pathTo(r.targetNode);(d=d.filter("edge")).style("line-color",r.color),d.style("z-index",10),d.style("width",20),r.path=d}}else r.sourceNode=t,r.isChoose=!0}})},Graph.prototype.initMouseOverEvent=function(){var r=this;r.cy.on("mouseover","node",function(e){if(!$('input[name="editCheckBox"]:checked').val()){var t=e.target;if(r.is_recombination_network()){if(!t.isChild())return;var o=r.cy.filter(":child").union(r.cy.edges())}else{var i=r.cy.nodes(),n=r.cy.edges();o=i.union(n)}var d=t.neighborhood();d=d.union(t),o.difference(d).style("opacity",.1)}}),r.cy.on("mouseout","node",function(e){if(!$('input[name="editCheckBox"]:checked').val()){var t=e.target,o=t.neighborhood();o=o.union(t);var i=r.cy.nodes(),n=r.cy.edges();i.union(n).difference(o).style("opacity",1)}})},Graph.prototype.mouseRightClick=function(){var i=this;i.cy.on("cxttap","node",function(e){var t=e.target;if(t.style("width",""),t.style("height",""),t.style("shape","ellipse"),t.style("background-color",""),t.style("border-width",0),t.style("opacity",1),i.is_recombination_network()){var o=t.parent();o.style("border-width",0),o.style("background-color","")}}),i.cy.on("cxttap","edge",function(e){var t=e.target;t.style("width",10),t.style("line-color",""),t.style("line-style","solid")})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vdXNlLmpzIl0sIm5hbWVzIjpbIkdyYXBoIiwicHJvdG90eXBlIiwiaW5pdFRhcEV2ZW50Iiwic2VsZiIsInRoaXMiLCJjbGlja19lbGVtZW50IiwiJCIsInRleHQiLCJjeSIsIm5vZGVzIiwic2l6ZSIsImVkZ2VzIiwib24iLCJldnQiLCJub2RlIiwidGFyZ2V0IiwiaXNfZWRpdCIsImlzX2FsbCIsInZhbCIsImlzX2VkaXRfc2luZ2xlX2RvdCIsInVuZGVmaW5lZCIsImlzX3JlY29tYmluYXRpb25fbmV0d29yayIsImlzQ2hpbGQiLCJlZGl0Tm9kZVN0eWxlIiwiZWRpdFRhZ1N0eWxlIiwiaWQiLCJkZWdyZWUiLCJlZGdlIiwiZWRpdEVkZ2VTdHlsZSIsImRhdGEiLCJpc0Nob29zZSIsImRibGNsaWNrIiwibmVpZ2hib3Job29kIiwiZmlsdGVyIiwiaXNQYXJlbnQiLCJ1bmlvbiIsInNvdXJjZU5vZGUiLCJ0YXJnZXROb2RlIiwicGF0aCIsImVsZW1lbnRzIiwiZGlqa3N0cmEiLCJwYXRoVG8iLCJzdHlsZSIsImNvbG9yIiwiaW5pdE1vdXNlT3ZlckV2ZW50IiwiZWxlcyIsImRpZmZlcmVuY2UiLCJtb3VzZVJpZ2h0Q2xpY2siLCJwYXJlbnQiXSwibWFwcGluZ3MiOiJBQUVBQSxNQUFNQyxVQUFVQyxhQUFlLFdBQzNCLElBQUlDLEVBQU9DLEtBQ1BDLEVBQWdCQyxFQUFFLHdCQUNGQSxFQUFFLHdCQUNSQyxLQUFLLFNBQVdKLEVBQUtLLEdBQUdDLFFBQVFDLE9BQU8sRUFBSSxVQUFZUCxFQUFLSyxHQUFHRyxRQUFRRCxRQUNyRlAsRUFBS0ssR0FBR0ksR0FBRyxNQUFPLE9BQVEsU0FBVUMsR0FDaEMsSUFBSUMsRUFBT0QsRUFBSUUsT0FDWEMsRUFBVVYsRUFBRSxzQ0FFWlcsRUFEZVgsRUFBRSx3Q0FDS1ksTUFFdEJDLEVBQW9DLE1BRHBCSCxFQUFRRSxPQUM4QkUsTUFBVkgsRUFDaEQsR0FBR2QsRUFBS2tCLDJCQUEyQixDQUMvQixJQUFHUCxFQUFL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QUFRUixFQUFLSyxHQUFHRyxRQUNURixFQUFNMEIsTUFBTXhCLEdBQ0ltQyxXQUFXZCxHQUN0QlUsTUFBTSxVQUFXLE9BSzdDMUMsTUFBTUMsVUFBVThDLGdCQUFrQixXQUM5QixJQUFJNUMsRUFBT0MsS0FDWEQsRUFBS0ssR0FBR0ksR0FBRyxTQUFTLE9BQU8sU0FBVUMsR0FDakMsSUFBSUUsRUFBU0YsRUFBSUUsT0FPakIsR0FOQUEsRUFBTzJCLE1BQU0sUUFBUSxJQUNyQjNCLEVBQU8yQixNQUFNLFNBQVMsSUFDdEIzQixFQUFPMkIsTUFBTSxRQUFRLFdBQ3JCM0IsRUFBTzJCLE1BQU0sbUJBQW1CLElBQ2hDM0IsRUFBTzJCLE1BQU0sZUFBZSxHQUM1QjNCLEVBQU8yQixNQUFNLFVBQVUsR0FDcEJ2QyxFQUFLa0IsMkJBQTJCLENBQy9CLElBQUkyQixFQUFTakMsRUFBT2lDLFNBQ3BCQSxFQUFPTixNQUFNLGVBQWUsR0FDNUJNLEVBQU9OLE1BQU0sbUJBQW1CLE9BR3hDdkMsRUFBS0ssR0FBR0ksR0FBRyxTQUFTLE9BQU8sU0FBVUMsR0FDakMsSUFBSUUsRUFBU0YsRUFBSUUsT0FDYkEsRUFBTzJCLE1BQU0sUUFBUSxJQUNyQjNCLEVBQU8yQixNQUFNLGFBQWEsSUFDMUIzQixFQUFPMkIsTUFBTSxhQUFhIiwiZmlsZSI6Im1vdXNlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4vL+m8oOagh+eCueWHu+S6i+S7tuWIneWni+WMllxyXG5HcmFwaC5wcm90b3R5cGUuaW5pdFRhcEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNsaWNrX2VsZW1lbnQgPSAkKFwiI3NpbmdsZS1lbGVtZW50LWRhdGFcIik7XHJcbiAgICB2YXIgdG90YWxfZWxlbWVudCA9ICQoXCIjdG90YWwtZWxlbWVudHMtZGF0YVwiKTtcclxuICAgIHRvdGFsX2VsZW1lbnQudGV4dChcIm5vZGVzOlwiICsgc2VsZi5jeS5ub2RlcygpLnNpemUoKS8yICsgXCIsZWRnZXM6XCIgKyBzZWxmLmN5LmVkZ2VzKCkuc2l6ZSgpKTtcclxuICAgIHNlbGYuY3kub24oJ3RhcCcsICdub2RlJywgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgIHZhciBub2RlID0gZXZ0LnRhcmdldDtcclxuICAgICAgICB2YXIgaXNfZWRpdCA9ICQoJ2lucHV0W25hbWU9XCJlZGl0Q2hlY2tCb3hcIl06Y2hlY2tlZCcpO1xyXG4gICAgICAgIHZhciBpc19hbGxfZ3JhcGggPSAkKFwiaW5wdXRbbmFtZT0nZW50aXJlQ2hlY2tCb3gnXTpjaGVja2VkXCIpO1xyXG4gICAgICAgIHZhciBpc19hbGwgPSBpc19hbGxfZ3JhcGgudmFsKCk7XHJcbiAgICAgICAgdmFyIGlzX2VkaXRfdmFsdWUgPSBpc19lZGl0LnZhbCgpO1xyXG4gICAgICAgIHZhciBpc19lZGl0X3NpbmdsZV9kb3QgPSBpc19lZGl0X3ZhbHVlPT1cIm9uXCIgJiYgaXNfYWxsID09IHVuZGVmaW5lZDtcclxuICAgICAgICBpZihzZWxmLmlzX3JlY29tYmluYXRpb25fbmV0d29yaygpKXtcclxuICAgICAgICAgICAgaWYobm9kZS5pc0NoaWxkKCkpe1xyXG4gICAgICAgICAgICAgICAgaWYoaXNfZWRpdF9zaW5nbGVfZG90KXtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmVkaXROb2RlU3R5bGUobm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5lZGl0VGFnU3R5bGUobm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBjbGlja19lbGVtZW50LnRleHQoXCJUeXBlOm5vZGUsXCIgKyBcImlkOlwiICsgbm9kZS5pZCgpICsgXCIsXCIgKyBcImRlZ3JlZTpcIiArIG5vZGUuZGVncmVlKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBpZihpc19lZGl0X3NpbmdsZV9kb3Qpe1xyXG4gICAgICAgICAgICAgICAgc2VsZi5lZGl0Tm9kZVN0eWxlKG5vZGUpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGNsaWNrX2VsZW1lbnQudGV4dChcIlR5cGU6bm9kZSxcIiArIFwiaWQ6XCIgKyBub2RlLmlkKCkgKyBcIixcIiArIFwiZGVncmVlOlwiICsgbm9kZS5kZWdyZWUoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHNlbGYuY3kub24oJ3RhcCcsICdlZGdlJywgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgIHZhciBlZGdlID0gZXZ0LnRhcmdldDtcclxuICAgICAgICB2YXIgaXNfZWRpdCA9ICQoJ2lucHV0W25hbWU9XCJlZGl0Q2hlY2tCb3hcIl06Y2hlY2tlZCcpO1xyXG4gICAgICAgIHZhciBpc19hbGxfZ3JhcGggPSAkKFwiaW5wdXRbbmFtZT0nZW50aXJlQ2hlY2tCb3gnXTpjaGVja2VkXCIpO1xyXG4gICAgICAgIHZhciBpc19hbGwgPSBpc19hbGxfZ3JhcGgudmFsKCk7XHJcbiAgICAgICAgdmFyIGlzX2VkaXRfdmFsdWUgPSBpc19lZGl0LnZhbCgpO1xyXG4gICAgICAgIHZhciBpc19lZGl0X3NpbmdsZV9kb3QgPSBpc19lZGl0X3ZhbHVlPT1cIm9uXCIgJiYgaXNfYWxsID09IHVuZGVmaW5lZDtcclxuICAgICAgICBpZihpc19lZGl0X3NpbmdsZV9kb3Qpe1xyXG4gICAgICAgICAgICBzZWxmLmVkaXRFZGdlU3R5bGUoZWRnZSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGNsaWNrX2VsZW1lbnQudGV4dChcIlR5cGU6ZWRnZSxcIiArIFwiaWQ6XCIgKyBlZGdlLmlkKCkgKyBcIixcIiArIFwic291cmNlOlwiICsgZWRnZS5kYXRhKCdzb3VyY2UnKSArIFwiLFwiICsgXCJ0YXJnZXQ6XCIgKyBlZGdlLmRhdGEoJ3RhcmdldCcpKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHNlbGYuaXNDaG9vc2UgPSBmYWxzZTtcclxuICAgIHNlbGYuY3kuZGJsY2xpY2soKTtcclxuICAgIHNlbGYuY3kub24oJ2RibGNsaWNrJywnbm9kZScsZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgIHZhciB0YXJnZXQgPSBldnQudGFyZ2V0O1xyXG4gICAgICAgIHZhciBpc19lZGl0ID0gJCgnaW5wdXRbbmFtZT1cImVkaXRDaGVja0JveFwiXTpjaGVja2VkJyk7XHJcbiAgICAgICAgdmFyIGlzX2VkaXRfdmFsdWUgPSBpc19lZGl0LnZhbCgpO1xyXG4gICAgICAgIGlmKGlzX2VkaXRfdmFsdWUpe1xyXG4gICAgICAgICAgICB2YXIgbmVpZ2hib3Job29kID0gdGFyZ2V0Lm5laWdoYm9yaG9vZCgpO1xyXG4gICAgICAgICAgICBpZihzZWxmLmlzX3JlY29tYmluYXRpb25fbmV0d29yaygpKXtcclxuICAgICAgICAgICAgICAgIHZhciBub2RlcyA9IG5laWdoYm9yaG9vZC5maWx0ZXIoXCI6Y2hpbGRcIik7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmVkaXRUYWdTdHlsZShub2Rlcyk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVzID0gbmVpZ2hib3Job29kLmZpbHRlcihcIm5vZGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGVkZ2VzID0gbmVpZ2hib3Job29kLmZpbHRlcihcImVkZ2VcIik7XHJcbiAgICAgICAgICAgIHNlbGYuZWRpdE5vZGVTdHlsZShub2Rlcyk7XHJcbiAgICAgICAgICAgIHNlbGYuZWRpdEVkZ2VTdHlsZShlZGdlcyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGlmKHRhcmdldC5pc1BhcmVudCgpKXtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbm9kZXMgPSBzZWxmLmN5Lm5vZGVzKCk7XHJcbiAgICAgICAgICAgIHZhciBlZGdlcyA9IHNlbGYuY3kuZWRnZXMoKTtcclxuICAgICAgICAgICAgdmFyIGVsZXMgPSBub2Rlcy51bmlvbihlZGdlcyk7XHJcbiAgICAgICAgICAgIGlmKCFzZWxmLmlzQ2hvb3NlKXtcclxuICAgICAgICAgICAgICAgIHNlbGYuc291cmNlTm9kZSA9IHRhcmdldDtcclxuICAgICAgICAgICAgICAgIHNlbGYuaXNDaG9vc2UgPSB0cnVlO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGlmKHNlbGYuc291cmNlTm9kZT09dGFyZ2V0KXtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0YXJnZXQucmVtb3ZlTGlzdGVuZXIoJ21vdXNlb3ZlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBuZWlnaGJvcmhvb2QgPSB0YXJnZXQubmVpZ2hib3Job29kKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VsZi5pc0Nob29zZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBzZWNvbmRfbmVpZ2hib3Job29zID0gbmVpZ2hib3Job29kLm5laWdoYm9yaG9vZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBuZWkgPSBuZWlnaGJvcmhvb2QudW5pb24oc2Vjb25kX25laWdoYm9yaG9vcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbmVpID0gbmVpLnVuaW9uKHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIG5vX25laSA9IGVsZXMuZGlmZmVyZW5jZShuZWkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vX25laS5zdHlsZSgnb3BhY2l0eScsMC4xKVxyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZWxlcy5zdHlsZSgnbGluZS1jb2xvcicsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnRhcmdldE5vZGUgPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pc0Nob29zZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkaWprc3RyYSA9IHNlbGYuY3kuZWxlbWVudHMoKS5kaWprc3RyYShzZWxmLnNvdXJjZU5vZGUsIGZ1bmN0aW9uKGVkZ2Upe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IGRpamtzdHJhLnBhdGhUbyhzZWxmLnRhcmdldE5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLmZpbHRlcihcImVkZ2VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aC5zdHlsZSgnbGluZS1jb2xvcicsIHNlbGYuY29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGguc3R5bGUoJ3otaW5kZXgnLCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aC5zdHlsZSgnd2lkdGgnLCAyMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXRoID0gcGF0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuR3JhcGgucHJvdG90eXBlLmluaXRNb3VzZU92ZXJFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuY3kub24oJ21vdXNlb3ZlcicsICdub2RlJywgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgIHZhciBpc19lZGl0ID0gJCgnaW5wdXRbbmFtZT1cImVkaXRDaGVja0JveFwiXTpjaGVja2VkJyk7XHJcbiAgICAgICAgdmFyIGlzX2VkaXRfdmFsdWUgPSBpc19lZGl0LnZhbCgpO1xyXG4gICAgICAgIGlmKGlzX2VkaXRfdmFsdWUpe1xyXG5cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICB2YXIgbm9kZSA9IGV2dC50YXJnZXQ7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmlzX3JlY29tYmluYXRpb25fbmV0d29yaygpKXtcclxuICAgICAgICAgICAgICAgIGlmKG5vZGUuaXNDaGlsZCgpKXtcclxuICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZXMgPSBzZWxmLmN5LmZpbHRlcihcIjpjaGlsZFwiKS51bmlvbihzZWxmLmN5LmVkZ2VzKCkpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVzID0gc2VsZi5jeS5ub2RlcygpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVkZ2VzID0gc2VsZi5jeS5lZGdlcygpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZXMgPSBub2Rlcy51bmlvbihlZGdlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG5laWdoYm9yaG9vZCA9IG5vZGUubmVpZ2hib3Job29kKCk7XHJcbiAgICAgICAgICAgIG5laWdoYm9yaG9vZCA9IG5laWdoYm9yaG9vZC51bmlvbihub2RlKTtcclxuICAgICAgICAgICAgdmFyIG5vX25laWdoYm9yaG9vZCA9IGVsZXMuZGlmZmVyZW5jZShuZWlnaGJvcmhvb2QpO1xyXG4gICAgICAgICAgICBub19uZWlnaGJvcmhvb2Quc3R5bGUoJ29wYWNpdHknLCAwLjEpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgc2VsZi5jeS5vbignbW91c2VvdXQnLCAnbm9kZScsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICB2YXIgaXNfZWRpdCA9ICQoJ2lucHV0W25hbWU9XCJlZGl0Q2hlY2tCb3hcIl06Y2hlY2tlZCcpO1xyXG4gICAgICAgIHZhciBpc19lZGl0X3ZhbHVlID0gaXNfZWRpdC52YWwoKTtcclxuICAgICAgICBpZihpc19lZGl0X3ZhbHVlKXtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdmFyIG5vZGUgPSBldnQudGFyZ2V0O1xyXG4gICAgICAgICAgICB2YXIgbmVpZ2hib3Job29kID0gbm9kZS5uZWlnaGJvcmhvb2QoKTtcclxuICAgICAgICAgICAgbmVpZ2hib3Job29kID0gbmVpZ2hib3Job29kLnVuaW9uKG5vZGUpO1xyXG4gICAgICAgICAgICB2YXIgbm9kZXMgPSBzZWxmLmN5Lm5vZGVzKCk7XHJcbiAgICAgICAgICAgIHZhciBlZGdlcyA9IHNlbGYuY3kuZWRnZXMoKTtcclxuICAgICAgICAgICAgdmFyIGVsZXMgPSBub2Rlcy51bmlvbihlZGdlcyk7XHJcbiAgICAgICAgICAgIHZhciBub19uZWlnaGJvcmhvb2QgPSBlbGVzLmRpZmZlcmVuY2UobmVpZ2hib3Job29kKTtcclxuICAgICAgICAgICAgbm9fbmVpZ2hib3Job29kLnN0eWxlKCdvcGFjaXR5JywgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5HcmFwaC5wcm90b3R5cGUubW91c2VSaWdodENsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5jeS5vbignY3h0dGFwJywnbm9kZScsZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgIHZhciB0YXJnZXQgPSBldnQudGFyZ2V0O1xyXG4gICAgICAgIHRhcmdldC5zdHlsZShcIndpZHRoXCIsJycpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZShcImhlaWdodFwiLCcnKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUoXCJzaGFwZVwiLCdlbGxpcHNlJyk7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlKFwiYmFja2dyb3VuZC1jb2xvclwiLFwiXCIpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZShcImJvcmRlci13aWR0aFwiLDApO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZShcIm9wYWNpdHlcIiwxKTtcclxuICAgICAgICBpZihzZWxmLmlzX3JlY29tYmluYXRpb25fbmV0d29yaygpKXtcclxuICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRhcmdldC5wYXJlbnQoKTtcclxuICAgICAgICAgICAgcGFyZW50LnN0eWxlKFwiYm9yZGVyLXdpZHRoXCIsMCk7XHJcbiAgICAgICAgICAgIHBhcmVudC5zdHlsZShcImJhY2tncm91bmQtY29sb3JcIixcIlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHNlbGYuY3kub24oXCJjeHR0YXBcIixcImVkZ2VcIixmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgdmFyIHRhcmdldCA9IGV2dC50YXJnZXQ7XHJcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZShcIndpZHRoXCIsMTApO1xyXG4gICAgICAgICAgICB0YXJnZXQuc3R5bGUoXCJsaW5lLWNvbG9yXCIsXCJcIik7XHJcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZShcImxpbmUtc3R5bGVcIixcInNvbGlkXCIpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuXHJcbiJdfQ==
