Graph.prototype.initDiagramSubmitButton=function(){var o=this;o.diagramButton.click(function(){event.preventDefault();var t=o.directChoose.val(),e=o.diagramChoose.val(),a=o.conceptChoose.val(),r=o.typeChoose.val();"Entirety"==t?o.ajaxGetEntireNetworkStatistics(o.id,a,e,r):"topology"==e?(o.visualMap(a,t),console.log("视觉映射点线")):o.ajaxGetNetworkStatistics(o.id,a,r,t)})},Graph.prototype.ajaxGetEntireNetworkStatistics=function(t,f,u,h){var g=this;wnatajax.get({url:"/analysis/hotmap/",data:{id:t,type:f},success:function(t){if(200==t.code){for(var e=t.message.size,a=[],r=0;r<=e-1;r++)a.push(r.toString());var o=t.data;if(o=JSON.parse(o),"shortpath"==f){var i=[];for(r=0;r<=e-1;r++){for(var s=0,n=0;n<=e-1;n++)s+=o[r*e+n][2];i.push(s),s=0}var l=0;for(r=0;r<i.length-1;r++)l+=i[r];var p=l/e;if(g.resultInput.val("average:"+p),"topology"==u)console.log("视觉映射");else if("line"==h||"bar"==h)g.drawLineOrBar(a,i,f,h);else if("polar"==h){var c=[];for(r=0;r<e;r++){var d=r/e*360;c.push([i[r],d])}g.drawPolar(c,f,"line")}else if("bar-polar"==h){for(c=[],r=0;r<e;r++){d=r/e*360;c.push([i[r],d])}g.drawPolar(c,f,"bar")}}else if("degreehistogram"==f)g.degreeHistogramScatter(o,f);else if("kcore"==f){o=t.data;if(o=JSON.parse(o),"topology"==u)g.kCoreTopology(o);else{o=t.data;o=JSON.parse(o),"bar"==h?g.kCoreBar(o,e):"pie"==h&&g.kCorePie(o,e)}}else"node_connectivity"==f?g.resultInput.val("node_connectivity:"+o):"graphdensity"==f?g.resultInput.val("graph density:"+o):"betweenesshistogram"==f&&g.degreeHistogramScatter(o,f)}},fail:function(t){}})},Graph.prototype.ajaxGetNetworkStatistics=function(t,p,c,e){var y=this;"radar"==c?wnatalert.alertOneInput({title:"Please Input Node ID With Radar",text:"You Can Join Multi Node ID with ?",inputValue:1,confirmButtonText:"Confirm",cancelButtonText:"Cancel",confirmCallback:function(g){wnatalert.close(),wnatajax.get({url:"/analysis/statistics/",data:{id:t,type:c,node_id:g},success:function(t){if(200==t.code){var e=g.split("?"),a=t.message.labels,r=t.message.size,o=t.data;o=JSON.parse(o);for(var i=[],s=[],n=0;n<=a.length-1;n++){var l={name:a[n],max:1.5};i.push(l)}var p={},c=[];for(n=0;n<r;n++){for(var d=o[n],f=0;f<a.length;f++)c.push(d[a[f]]);p={name:e[n],value:c},c=[],s.push(p)}var u={title:{text:"Radar"},tooltip:{},legend:{},radar:{name:{textStyle:{color:"#fff",backgroundColor:"#999",borderRadius:3,padding:[3,5]}},indicator:i},series:[{name:"Radar",type:"radar",data:s}]};y.mychart.setOption(u,!0)}else{var h=t.message;wnatalert.alertError(h)}},fail:function(t){}})}}):wnatajax.get({url:"/analysis/statistics/",data:{id:t,type:p,is_node:e},success:function(t){if(200==t.code){var e=t.message.size,a=t.message.average;if(-1!=p.indexOf("communities"))var r="modularity:"+a;else r="average:"+a;y.resultInput.val(r);var o=t.data;if(o=JSON.parse(o),"line"==c){for(var i=[],s=[],n=0;n<e;n++)i.push(n.toString()),s.push(o[n]);y.drawLineOrBar(i,s,p,"line")}else if("polar"==c){for(s=[],n=0;n<e;n++){var l=n/e*360;s.push([o[n],l])}y.drawPolar(s,p,"line")}else if("bar"==c){for(i=[],s=[],n=0;n<e;n++)i.push(n.toString()),s.push(o[n]);y.drawLineOrBar(i,s,p,"bar")}else if("bar-polar"==c){for(s=[],n=0;n<e;n++){l=n/e*360;s.push([o[n],l])}y.drawPolar(s,p,"bar")}else"pie"==c&&y.drawPie(o,p)}},fail:function(t){}})},Graph.prototype.drawLineOrBar=function(t,e,a,r){var o={title:{text:a,left:"center"},legend:{},tooltip:{},dataZoom:[{type:"slider",start:10,end:60},{type:"inside",start:10,end:60}],xAxis:{type:"category",data:t},yAxis:{type:"value"},series:[{type:r,data:e}]};this.mychart.setOption(o,!0)},Graph.prototype.drawPolar=function(t,e,a){var r={title:{text:e},legend:{},polar:{},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},angleAxis:{type:"value",startAngle:0},radiusAxis:{},series:[{name:"line",type:a,coordinateSystem:"polar",data:t}]};this.mychart.setOption(r,!0)},Graph.prototype.degreeHistogramScatter=function(t,e){var a=[];for(var r in t){var o=t[r];0==o[1]||a.push(o)}var i={title:{text:e,left:"center"},dataZoom:[{type:"slider",start:10,end:60},{type:"inside",start:10,end:60}],xAxis:{type:"value",splitLine:{lineStyle:{type:"dashed"}}},yAxis:{type:"value",splitLine:{lineStyle:{type:"dashed"}}},series:[{name:"scatter",type:"scatter",emphasis:{label:{show:!0,position:"left",color:"blue",fontSize:16}},data:a}]};this.mychart.setOption(i,!0)},Graph.prototype.kCoreTopology=function(r){var o=this,i=0;o.cy.nodes().forEach(function(t,e,a){e==r[i]?(t.style("background-color",o.color),i++):t.style("background-color","")})},Graph.prototype.kCorePie=function(t,e){var a={title:{text:"kcore-pie",left:"center"},tooltip:{},legend:{orient:"vertical",left:"left",data:["kcore","other-subgraph"]},series:[{name:"kcore",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:t.length,name:"kcore"},{value:e-t.length,name:"other-subgraph"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};this.mychart.setOption(a)},Graph.prototype.kCoreBar=function(t,e){var a={xAxis:{type:"category",data:["all-graph","kcore"]},yAxis:{type:"value"},series:[{data:[e,t.length],type:"bar"}]};this.mychart.setOption(a)},Graph.prototype.communitiesVisualMap=function(t){for(var e=this.colors,a=0;a<t.length-1;a++)for(var r=t[a],o=0;o<r.length;o++){this.cy.$("#"+r[o]).style("background-color",e[a])}},Graph.prototype.communitiesDiagram=function(t,e,a){if(console.log(t),"pie"==e){for(var r=[],o=[],i=0;i<=t.length-1;i++)r.push((i+1).toString()),o.push({value:t[i].length,name:(i+1).toString()});var s={title:{text:"community-pie",left:"center"},tooltip:{},legend:{orient:"vertical",left:"left",data:r},series:[{name:a,type:"pie",radius:"55%",center:["50%","50%"],data:o,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}else if("bar"==e){var n=[];for(o=[],i=0;i<=t.length-1;i++)n.push(i.toString()),o.push(t[i].length);s={title:{text:"community-pie",left:"center"},tooltip:{},xAxis:{type:"category",data:n},yAxis:{type:"value"},series:[{data:o,type:"bar"}]}}else if("pie+bar"==e){n=[];var l=[],p=[];for(i=0;i<=t.length-1;i++)n.push(i.toString()),l.push(t[i].length),p.push({value:t[i].length,name:i.toString()});s={title:{text:"community-pie+bar",left:"center"},tooltip:{trigger:"axis"},legend:[{orient:"vertical",left:"left",data:n},{orient:"vertical",left:"left",data:n}],xAxis:{type:"category"},yAxis:{gridIndex:0},grid:[{top:"50%",bottom:30,left:100}],series:[{type:"pie",data:p,radius:"30%",center:["50%","25%"]},{type:"bar",data:p}]}}this.mychart.setOption(s,!0)},Graph.prototype.drawPie=function(t,e){var a=[],r=0;for(var o in t){var i=t[o];a.push(i),r<i&&(r=i)}for(var s=[],n=1;n<=r;n++)s.push(0);for(var o in a){s[(i=a[o])-1]+=1}for(var o in a=[],s)a.push({name:parseInt(o)+1,value:s[o]});var l={title:{text:e,left:"center"},tooltip:{trigger:"item",formatter:"{b}:{c}"},series:[{type:"pie",data:a,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};this.mychart.setOption(l,!0)},Graph.prototype.visualColorMapping=function(o,t){var e=this;if("Node"==t){var i=e.cy.nodes().max(function(t,e,a){return parseFloat(t.data(o))}),s=e.cy.nodes().min(function(t,e,a){return parseFloat(t.data(o))});i=i.value,s=s.value,e.cy.nodes().forEach(function(t,e,a){if(!t.isParent()){var r=parseFloat(t.data(o));r=(r=255-(r=parseInt((r-s)/i*255)))<=15?"#ff0"+(r=r.toString(16))+"00":"#ff"+(r=r.toString(16))+"00",t.style("background-color",r)}})}else{i=e.cy.edges().max(function(t,e,a){return parseFloat(t.data(o))}),s=e.cy.edges().min(function(t,e,a){return parseFloat(t.data(o))});i=i.value,s=s.value,e.cy.edges().forEach(function(t,e,a){var r=parseFloat(t.data(o));r=(r=255-(r=parseInt((r-s)/i*255)))<=15?"#ff0"+(r=r.toString(16))+"00":"#ff"+(r=r.toString(16))+"00",t.style("line-color",r)})}},Graph.prototype.entireVisualMapping=function(o){for(var i=o[0],s=o[0],t=1;t<o.length-1;t++)i>o[t]&&(i=o[t]),s<o[t]&&(s=o[t]);this.cy.nodes().forEach(function(t,e,a){if(!t.isParent()){var r=o[e];r=(r=255-(r=parseInt((r-i)/s*255)))<=15?"#ff0"+(r=r.toString(16))+"00":"#ff"+(r=r.toString(16))+"00",t.style("background-color",r)}})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YXRpc3RpY3MuanMiXSwibmFtZXMiOlsiR3JhcGgiLCJwcm90b3R5cGUiLCJpbml0RGlhZ3JhbVN1Ym1pdEJ1dHRvbiIsInNlbGYiLCJ0aGlzIiwiZGlhZ3JhbUJ1dHRvbiIsImNsaWNrIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImlzX25vZGUiLCJkaXJlY3RDaG9vc2UiLCJ2YWwiLCJpc190dXBsZSIsImRpYWdyYW1DaG9vc2UiLCJ0eXBlIiwiY29uY2VwdENob29zZSIsImRpYWdyYW1UeXBlIiwidHlwZUNob29zZSIsImFqYXhHZXRFbnRpcmVOZXR3b3JrU3RhdGlzdGljcyIsImlkIiwidmlzdWFsTWFwIiwiY29uc29sZSIsImxvZyIsImFqYXhHZXROZXR3b3JrU3RhdGlzdGljcyIsInduYXRhamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJzaXplIiwiZGltIiwiaSIsInB1c2giLCJ0b1N0cmluZyIsIkpTT04iLCJwYXJzZSIsImRhIiwidGVtcCIsImoiLCJzdW0iLCJsZW5ndGgiLCJhdmVyYWdlIiwicmVzdWx0SW5wdXQiLCJkcmF3TGluZU9yQmFyIiwiZCIsInRoZXRhIiwiZHJhd1BvbGFyIiwiZGVncmVlSGlzdG9ncmFtU2NhdHRlciIsImtDb3JlVG9wb2xvZ3kiLCJrQ29yZUJhciIsImtDb3JlUGllIiwiZmFpbCIsInduYXRhbGVydCIsImFsZXJ0T25lSW5wdXQiLCJ0aXRsZSIsInRleHQiLCJpbnB1dFZhbHVlIiwiY29uZmlybUJ1dHRvblRleHQiLCJjYW5jZWxCdXR0b25UZXh0IiwiY29uZmlybUNhbGxiYWNrIiwiY2xvc2UiLCJub2RlX2lkIiwibm9kZXMiLCJzcGxpdCIsImxhYmxlcyIsImluZGkiLCJuYW1lIiwibWF4IiwidCIsIngiLCJxIiwidmFsdWUiLCJvcHRpb24iLCJ0b29sdGlwIiwibGVnZW5kIiwicmFkYXIiLCJ0ZXh0U3R5bGUiLCJjb2xvciIsImJhY2tncm91bmRDb2xvciIsImJvcmRlclJhZGl1cyIsInBhZGRpbmciLCJpbmRpY2F0b3IiLCJzZXJpZXMiLCJteWNoYXJ0Iiwic2V0T3B0aW9uIiwibWVzc2FnZSIsImFsZXJ0RXJyb3IiLCJpbmRleE9mIiwidmFsU3ByaW5nIiwiZHJhd1BpZSIsImRhdGFfc291cmNlIiwiY2hhcnRUeXBlIiwibGVmdCIsImRhdGFab29tIiwic3RhcnQiLCJlbmQiLCJ4QXhpcyIsInlBeGlzIiwicG9sYXIiLCJ0cmlnZ2VyIiwiYXhpc1BvaW50ZXIiLCJhbmdsZUF4aXMiLCJzdGFydEFuZ2xlIiwicmFkaXVzQXhpcyIsImNvb3JkaW5hdGVTeXN0ZW0iLCJpbmZvcyIsImtleSIsInNwbGl0TGluZSIsImxpbmVTdHlsZSIsImVtcGhhc2lzIiwibGFiZWwiLCJzaG93IiwicG9zaXRpb24iLCJmb250U2l6ZSIsImN5IiwiZm9yRWFjaCIsImVsZSIsImVsZXMiLCJzdHlsZSIsIm9yaWVudCIsInJhZGl1cyIsImNlbnRlciIsIml0ZW1TdHlsZSIsInNoYWRvd0JsdXIiLCJzaGFkb3dPZmZzZXRYIiwic2hhZG93Q29sb3IiLCJjb21tdW5pdGllc1Zpc3VhbE1hcCIsImNvbG9ycyIsIiQiLCJjb21tdW5pdGllc0RpYWdyYW0iLCJsZWdlbmREYXRhIiwic2VyaWVzRGF0YSIsInhBeGlzRGF0YSIsInNlcmllc0JhckRhdGEiLCJzZXJpZXNQaWVEYXRhIiwiZ3JpZEluZGV4IiwiZ3JpZCIsInRvcCIsImJvdHRvbSIsImRhdHVtIiwicGFyc2VJbnQiLCJmb3JtYXR0ZXIiLCJ2aXN1YWxDb2xvck1hcHBpbmciLCJwYXJzZUZsb2F0IiwibWluIiwiaXNQYXJlbnQiLCJ3ZWlnaHQiLCJlZGdlcyIsImVudGlyZVZpc3VhbE1hcHBpbmciXSwibWFwcGluZ3MiOiJBQUFBQSxNQUFNQyxVQUFVQyx3QkFBMEIsV0FDdEMsSUFBSUMsRUFBT0MsS0FDWEQsRUFBS0UsY0FBY0MsTUFBTSxXQUNyQkMsTUFBTUMsaUJBQ04sSUFBSUMsRUFBVU4sRUFBS08sYUFBYUMsTUFDNUJDLEVBQVdU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QU8sUUFFN0IsR0FFRCxRQURUK0UsRUFBU0EsRUFBT2pILFNBQVMsS0FDTyxLQUd2QixPQURUaUgsRUFBU0EsRUFBT2pILFNBQVMsS0FDTSxLQUVuQ21GLEVBQUlFLE1BQU0sbUJBQW9CNEIiLCJmaWxlIjoic3RhdGlzdGljcy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJHcmFwaC5wcm90b3R5cGUuaW5pdERpYWdyYW1TdWJtaXRCdXR0b24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmRpYWdyYW1CdXR0b24uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIGlzX25vZGUgPSBzZWxmLmRpcmVjdENob29zZS52YWwoKTtcclxuICAgICAgICB2YXIgaXNfdHVwbGUgPSBzZWxmLmRpYWdyYW1DaG9vc2UudmFsKCk7XHJcbiAgICAgICAgdmFyIHR5cGUgPSBzZWxmLmNvbmNlcHRDaG9vc2UudmFsKCk7XHJcbiAgICAgICAgdmFyIGRpYWdyYW1UeXBlID0gc2VsZi50eXBlQ2hvb3NlLnZhbCgpO1xyXG5cclxuICAgICAgICBpZiAoaXNfbm9kZSA9PSAnRW50aXJldHknKSB7XHJcbiAgICAgICAgICAgIC8v5Y2V5Liq572R57uc5pW05L2T55qE5aSE55CGXHJcbiAgICAgICAgICAgIHNlbGYuYWpheEdldEVudGlyZU5ldHdvcmtTdGF0aXN0aWNzKHNlbGYuaWQsdHlwZSxpc190dXBsZSxkaWFncmFtVHlwZSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL+WNleS4que9kee7nOeCuee6v+eahOWkhOeQhlxyXG4gICAgICAgICAgICBpZiAoaXNfdHVwbGUgPT0gJ3RvcG9sb2d5Jykge1xyXG4gICAgICAgICAgICAgICAgLy/ljZXkuKrnvZHnu5zngrnnur/mmKDlsITliLDmi5PmiZFcclxuICAgICAgICAgICAgICAgIHNlbGYudmlzdWFsTWFwKHR5cGUsaXNfbm9kZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuinhuinieaYoOWwhOeCuee6v1wiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8v5Y2V5Liq572R57uc54K557q/5pig5bCE5Yiw5Zu+6KGoXHJcbiAgICAgICAgICAgICAgICAvLyBpZigpe1xyXG4gICAgICAgICAgICAgICAgc2VsZi5hamF4R2V0TmV0d29ya1N0YXRpc3RpY3Moc2VsZi5pZCwgdHlwZSwgZGlhZ3JhbVR5cGUsaXNfbm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfSk7XHJcbn07XHJcbi8vZW50aXJl55qE5YiG5rWBXHJcbkdyYXBoLnByb3RvdHlwZS5hamF4R2V0RW50aXJlTmV0d29ya1N0YXRpc3RpY3MgPSBmdW5jdGlvbihpZCx0eXBlLGlzX3R1cGxlLGRpYWdyYW1UeXBlKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICB3bmF0YWpheC5nZXQoe1xyXG4gICAgICAgICAndXJsJzonL2FuYWx5c2lzL2hvdG1hcC8nLFxyXG4gICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICdpZCc6aWQsXHJcbiAgICAgICAgICAgICd0eXBlJzp0eXBlXHJcbiAgICAgICAgfSwnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXT09MjAwKXtcclxuICAgICAgICAgICAgICAgIHZhciBzaXplID0gcmVzdWx0WydtZXNzYWdlJ11bJ3NpemUnXTtcclxuICAgICAgICAgICAgICAgIHZhciBkaW0gPSBbXTtcclxuICAgICAgICAgICAgICAgICBmb3IodmFyIGk9MCA7IGkgPD0gc2l6ZS0xO2krKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgIGRpbS5wdXNoKGkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgaWYodHlwZT09J3Nob3J0cGF0aCcpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8PXNpemUtMTtpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaj0wO2o8PXNpemUtMTtqKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcCArPSBkYXRhW2kqc2l6ZStqXVsyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYS5wdXNoKHRlbXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxkYS5sZW5ndGgtMSA7aSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGRhW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXZlcmFnZSA9IHN1bS9zaXplO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucmVzdWx0SW5wdXQudmFsKCdhdmVyYWdlOicgKyBhdmVyYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihpc190dXBsZT09J3RvcG9sb2d5Jyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi6KeG6KeJ5pig5bCEXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihkaWFncmFtVHlwZT09J2xpbmUnfHxkaWFncmFtVHlwZT09J2JhcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZHJhd0xpbmVPckJhcihkaW0sZGEsdHlwZSxkaWFncmFtVHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGRpYWdyYW1UeXBlPT0ncG9sYXInKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aGV0YSA9IGkgLyBzaXplICogMzYwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQucHVzaChbZGFbaV0sIHRoZXRhXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRyYXdQb2xhcihkLCB0eXBlLCAnbGluZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihkaWFncmFtVHlwZT09J2Jhci1wb2xhcicpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aGV0YSA9IGkgLyBzaXplICogMzYwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQucHVzaChbZGFbaV0sIHRoZXRhXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRyYXdQb2xhcihkLCB0eXBlLCAnYmFyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZih0eXBlPT0nZGVncmVlaGlzdG9ncmFtJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kZWdyZWVIaXN0b2dyYW1TY2F0dGVyKGRhdGEsdHlwZSlcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKHR5cGU9PSdrY29yZScpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzdWx0WydkYXRhJ107XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaXNfdHVwbGU9PSd0b3BvbG9neScpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmtDb3JlVG9wb2xvZ3koZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzdWx0WydkYXRhJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihkaWFncmFtVHlwZT09J2Jhcicpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5rQ29yZUJhcihkYXRhLHNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihkaWFncmFtVHlwZT09J3BpZScpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5rQ29yZVBpZShkYXRhLHNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYodHlwZT09J25vZGVfY29ubmVjdGl2aXR5Jyl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZXN1bHRJbnB1dC52YWwoJ25vZGVfY29ubmVjdGl2aXR5OicgKyBkYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYodHlwZT09J2dyYXBoZGVuc2l0eScpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucmVzdWx0SW5wdXQudmFsKCdncmFwaCBkZW5zaXR5OicgKyBkYXRhKTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKHR5cGU9PVwiYmV0d2VlbmVzc2hpc3RvZ3JhbVwiKXtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmRlZ3JlZUhpc3RvZ3JhbVNjYXR0ZXIoZGF0YSx0eXBlKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwnZmFpbCc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59O1xyXG5HcmFwaC5wcm90b3R5cGUuYWpheEdldE5ldHdvcmtTdGF0aXN0aWNzID0gZnVuY3Rpb24gKGlkLCB0eXBlLCBkaWFncmFtVHlwZSxpc19ub2RlKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBpZiAoZGlhZ3JhbVR5cGUgPT0gJ3JhZGFyJykge1xyXG4gICAgICAgIC8v6L6T5YWl54K555qEaWRcclxuICAgICAgICB3bmF0YWxlcnQuYWxlcnRPbmVJbnB1dCh7XHJcbiAgICAgICAgICAgICd0aXRsZSc6ICdQbGVhc2UgSW5wdXQgTm9kZSBJRCBXaXRoIFJhZGFyJyxcclxuICAgICAgICAgICAgJ3RleHQnOidZb3UgQ2FuIEpvaW4gTXVsdGkgTm9kZSBJRCB3aXRoID8nLFxyXG4gICAgICAgICAgICAnaW5wdXRWYWx1ZSc6IDEsXHJcbiAgICAgICAgICAgICdjb25maXJtQnV0dG9uVGV4dCc6ICdDb25maXJtJyxcclxuICAgICAgICAgICAgJ2NhbmNlbEJ1dHRvblRleHQnOiAnQ2FuY2VsJyxcclxuICAgICAgICAgICAgJ2NvbmZpcm1DYWxsYmFjayc6IGZ1bmN0aW9uIChpbnB1dFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB3bmF0YWxlcnQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIHduYXRhamF4LmdldCh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3VybCc6ICcvYW5hbHlzaXMvc3RhdGlzdGljcy8nLFxyXG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnaWQnOiBpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiBkaWFncmFtVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ25vZGVfaWQnOiBpbnB1dFZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub2RlcyA9IGlucHV0VmFsdWUuc3BsaXQoJz8nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYWJsZXMgPSByZXN1bHRbJ21lc3NhZ2UnXVsnbGFiZWxzJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IHJlc3VsdFsnbWVzc2FnZSddWydzaXplJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kaSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8PWxhYmxlcy5sZW5ndGgtMSA7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSB7bmFtZTpsYWJsZXNbaV0sbWF4OjEuNX07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kaS5wdXNoKHRlbXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaTxzaXplOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBxID0gZGF0YVtpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGo9MDtqPGxhYmxlcy5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgucHVzaChxW2xhYmxlc1tqXV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6bm9kZXNbaV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGEucHVzaCh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1JhZGFyJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVnZW5kOiB7fSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWRhcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0U3R5bGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyNmZmYnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyM5OTknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiBbMywgNV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNhdG9yOiBpbmRpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJpZXM6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdSYWRhcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyYWRhcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5teWNoYXJ0LnNldE9wdGlvbihvcHRpb24sdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSByZXN1bHRbJ21lc3NhZ2UnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHduYXRhbGVydC5hbGVydEVycm9yKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgJ2ZhaWwnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgd25hdGFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvYW5hbHlzaXMvc3RhdGlzdGljcy8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdpZCc6IGlkLFxyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiB0eXBlLFxyXG4gICAgICAgICAgICAgICAgJ2lzX25vZGUnOmlzX25vZGVcclxuICAgICAgICAgICAgfSwgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT0gMjAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzaXplID0gcmVzdWx0WydtZXNzYWdlJ11bJ3NpemUnXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXZlcmFnZSA9IHJlc3VsdFsnbWVzc2FnZSddWydhdmVyYWdlJ107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZS5pbmRleE9mKFwiY29tbXVuaXRpZXNcIikhPS0xKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbFNwcmluZyA9IFwibW9kdWxhcml0eTpcIiArIGF2ZXJhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWxTcHJpbmcgPSAnYXZlcmFnZTonICsgYXZlcmFnZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZXN1bHRJbnB1dC52YWwodmFsU3ByaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlhZ3JhbVR5cGUgPT0gJ2xpbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaW0gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaW0ucHVzaChpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGEucHVzaChkYXRhW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRyYXdMaW5lT3JCYXIoZGltLCBkYSwgdHlwZSwgJ2xpbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRpYWdyYW1UeXBlID09ICdwb2xhcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGhldGEgPSBpIC8gc2l6ZSAqIDM2MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhLnB1c2goW2RhdGFbaV0sIHRoZXRhXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kcmF3UG9sYXIoZGEsIHR5cGUsICdsaW5lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkaWFncmFtVHlwZSA9PSAnYmFyJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGltID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGltLnB1c2goaS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhLnB1c2goZGF0YVtpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kcmF3TGluZU9yQmFyKGRpbSwgZGEsIHR5cGUsICdiYXInKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRpYWdyYW1UeXBlID09ICdiYXItcG9sYXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRoZXRhID0gaSAvIHNpemUgKiAzNjA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYS5wdXNoKFtkYXRhW2ldLCB0aGV0YV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZHJhd1BvbGFyKGRhLCB0eXBlLCAnYmFyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoZGlhZ3JhbVR5cGUgPT0gXCJwaWVcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZHJhd1BpZShkYXRhLHR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgJ2ZhaWwnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufTtcclxuXHJcbkdyYXBoLnByb3RvdHlwZS5kcmF3TGluZU9yQmFyID0gZnVuY3Rpb24gKGRpbSwgZGF0YV9zb3VyY2UsIHR5cGUsIGNoYXJ0VHlwZSkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIG9wdGlvbiA9IHtcclxuICAgICAgICB0aXRsZToge1xyXG4gICAgICAgICAgICB0ZXh0OiB0eXBlLFxyXG4gICAgICAgICAgICBsZWZ0OiAnY2VudGVyJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbGVnZW5kOiB7fSxcclxuICAgICAgICB0b29sdGlwOiB7fSxcclxuICAgICAgICBkYXRhWm9vbTogW1xyXG4gICAgICAgIHsgICAvLyDov5nkuKpkYXRhWm9vbee7hOS7tu+8jOm7mOiupOaOp+WItnjovbTjgIJcclxuICAgICAgICAgICAgdHlwZTogJ3NsaWRlcicsIC8vIOi/meS4qiBkYXRhWm9vbSDnu4Tku7bmmK8gc2xpZGVyIOWeiyBkYXRhWm9vbSDnu4Tku7ZcclxuICAgICAgICAgICAgc3RhcnQ6IDEwLCAgICAgIC8vIOW3pui+ueWcqCAxMCUg55qE5L2N572u44CCXHJcbiAgICAgICAgICAgIGVuZDogNjAgICAgICAgICAvLyDlj7PovrnlnKggNjAlIOeahOS9jee9ruOAglxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyAgIC8vIOi/meS4qmRhdGFab29t57uE5Lu277yM5Lmf5o6n5Yi2eOi9tOOAglxyXG4gICAgICAgICAgICB0eXBlOiAnaW5zaWRlJywgLy8g6L+Z5LiqIGRhdGFab29tIOe7hOS7tuaYryBpbnNpZGUg5Z6LIGRhdGFab29tIOe7hOS7tlxyXG4gICAgICAgICAgICBzdGFydDogMTAsICAgICAgLy8g5bem6L655ZyoIDEwJSDnmoTkvY3nva7jgIJcclxuICAgICAgICAgICAgZW5kOiA2MCAgICAgICAgIC8vIOWPs+i+ueWcqCA2MCUg55qE5L2N572u44CCXHJcbiAgICAgICAgfV0sXHJcbiAgICAgICAgeEF4aXM6IHtcclxuICAgICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JyxcclxuICAgICAgICAgICAgZGF0YTogZGltXHJcbiAgICAgICAgfSxcclxuICAgICAgICB5QXhpczoge1xyXG4gICAgICAgICAgICB0eXBlOiAndmFsdWUnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXJpZXM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogY2hhcnRUeXBlLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogZGF0YV9zb3VyY2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICBdXHJcbiAgICB9O1xyXG4gICAgc2VsZi5teWNoYXJ0LnNldE9wdGlvbihvcHRpb24sIHRydWUpO1xyXG59O1xyXG5cclxuR3JhcGgucHJvdG90eXBlLmRyYXdQb2xhciA9IGZ1bmN0aW9uIChkYXRhX3NvdXJjZSwgdHlwZSwgY2hhcnRUeXBlKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgb3B0aW9uID0ge1xyXG4gICAgICAgIHRpdGxlOiB7XHJcbiAgICAgICAgICAgIHRleHQ6IHR5cGUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsZWdlbmQ6IHt9LFxyXG4gICAgICAgIHBvbGFyOiB7fSxcclxuICAgICAgICB0b29sdGlwOiB7XHJcbiAgICAgICAgICAgIHRyaWdnZXI6ICdheGlzJyxcclxuICAgICAgICAgICAgYXhpc1BvaW50ZXI6IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdjcm9zcydcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYW5nbGVBeGlzOiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd2YWx1ZScsXHJcbiAgICAgICAgICAgIHN0YXJ0QW5nbGU6IDBcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJhZGl1c0F4aXM6IHt9LFxyXG4gICAgICAgIHNlcmllczogW3tcclxuICAgICAgICAgICAgbmFtZTogJ2xpbmUnLFxyXG4gICAgICAgICAgICB0eXBlOiBjaGFydFR5cGUsXHJcbiAgICAgICAgICAgIGNvb3JkaW5hdGVTeXN0ZW06ICdwb2xhcicsXHJcbiAgICAgICAgICAgIGRhdGE6IGRhdGFfc291cmNlXHJcbiAgICAgICAgfV1cclxuICAgIH07XHJcbiAgICBzZWxmLm15Y2hhcnQuc2V0T3B0aW9uKG9wdGlvbiwgdHJ1ZSk7XHJcbn07XHJcblxyXG5HcmFwaC5wcm90b3R5cGUuZGVncmVlSGlzdG9ncmFtU2NhdHRlciA9IGZ1bmN0aW9uIChkYXRhLHR5cGUpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBpbmZvcyA9IFtdO1xyXG4gICAgZm9yKHZhciBrZXkgaW4gZGF0YSl7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gZGF0YVtrZXldO1xyXG4gICAgICAgIGlmKHZhbHVlWzFdPT0wKXtcclxuXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGluZm9zLnB1c2godmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHZhciBvcHRpb24gPSB7XHJcbiAgICAgICAgdGl0bGU6IHtcclxuICAgICAgICAgICAgdGV4dDogdHlwZSxcclxuICAgICAgICAgICAgbGVmdDogJ2NlbnRlcidcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vIHRvb2x0aXA6IHtcclxuICAgICAgICAvLyAgICAgdHJpZ2dlcjogJ2F4aXMnLFxyXG4gICAgICAgIC8vICAgICBheGlzUG9pbnRlcjoge1xyXG4gICAgICAgIC8vICAgICAgICAgdHlwZTogJ2Nyb3NzJ1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAgIGRhdGFab29tOiBbXHJcbiAgICAgICAgeyAgIC8vIOi/meS4qmRhdGFab29t57uE5Lu277yM6buY6K6k5o6n5Yi2eOi9tOOAglxyXG4gICAgICAgICAgICB0eXBlOiAnc2xpZGVyJywgLy8g6L+Z5LiqIGRhdGFab29tIOe7hOS7tuaYryBzbGlkZXIg5Z6LIGRhdGFab29tIOe7hOS7tlxyXG4gICAgICAgICAgICBzdGFydDogMTAsICAgICAgLy8g5bem6L655ZyoIDEwJSDnmoTkvY3nva7jgIJcclxuICAgICAgICAgICAgZW5kOiA2MCAgICAgICAgIC8vIOWPs+i+ueWcqCA2MCUg55qE5L2N572u44CCXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7ICAgLy8g6L+Z5LiqZGF0YVpvb23nu4Tku7bvvIzkuZ/mjqfliLZ46L2044CCXHJcbiAgICAgICAgICAgIHR5cGU6ICdpbnNpZGUnLCAvLyDov5nkuKogZGF0YVpvb20g57uE5Lu25pivIGluc2lkZSDlnosgZGF0YVpvb20g57uE5Lu2XHJcbiAgICAgICAgICAgIHN0YXJ0OiAxMCwgICAgICAvLyDlt6bovrnlnKggMTAlIOeahOS9jee9ruOAglxyXG4gICAgICAgICAgICBlbmQ6IDYwICAgICAgICAgLy8g5Y+z6L655ZyoIDYwJSDnmoTkvY3nva7jgIJcclxuICAgICAgICB9XSxcclxuICAgICAgICB4QXhpczoge1xyXG4gICAgICAgICAgICB0eXBlOiAndmFsdWUnLFxyXG4gICAgICAgICAgICBzcGxpdExpbmU6IHtcclxuICAgICAgICAgICAgICAgIGxpbmVTdHlsZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkYXNoZWQnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICB5QXhpczoge1xyXG4gICAgICAgICAgICB0eXBlOiAndmFsdWUnLFxyXG4gICAgICAgICAgICBzcGxpdExpbmU6IHtcclxuICAgICAgICAgICAgICAgIGxpbmVTdHlsZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkYXNoZWQnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlcmllczogW3tcclxuICAgICAgICAgICAgbmFtZTogJ3NjYXR0ZXInLFxyXG4gICAgICAgICAgICB0eXBlOiAnc2NhdHRlcicsXHJcbiAgICAgICAgICAgIGVtcGhhc2lzOiB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdsZWZ0JyxcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAxNlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkYXRhOiBpbmZvc1xyXG4gICAgICAgIH1dXHJcbiAgICB9O1xyXG5cclxuICAgIHNlbGYubXljaGFydC5zZXRPcHRpb24ob3B0aW9uLHRydWUpO1xyXG59O1xyXG5cclxuR3JhcGgucHJvdG90eXBlLmtDb3JlVG9wb2xvZ3kgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGogPSAwO1xyXG4gICAgc2VsZi5jeS5ub2RlcygpLmZvckVhY2goZnVuY3Rpb24gKGVsZSwgaSwgZWxlcykge1xyXG4gICAgICAgIGlmKGkgPT0gZGF0YVtqXSl7XHJcbiAgICAgICAgICAgICBlbGUuc3R5bGUoJ2JhY2tncm91bmQtY29sb3InLCBzZWxmLmNvbG9yKTtcclxuICAgICAgICAgICAgIGogKysgO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBlbGUuc3R5bGUoJ2JhY2tncm91bmQtY29sb3InLCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5HcmFwaC5wcm90b3R5cGUua0NvcmVQaWUgPSBmdW5jdGlvbiAoZGF0YSxzaXplKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdmFsdWUxID0gZGF0YS5sZW5ndGg7XHJcbiAgICB2YXIgdmFsdWUyID0gc2l6ZSAtIGRhdGEubGVuZ3RoO1xyXG4gICAgdmFyIG9wdGlvbiA9IHtcclxuICAgICAgICB0aXRsZToge1xyXG4gICAgICAgICAgICB0ZXh0OiAna2NvcmUtcGllJyxcclxuICAgICAgICAgICAgbGVmdDogJ2NlbnRlcidcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRvb2x0aXA6IHt9LFxyXG4gICAgICAgIGxlZ2VuZDoge1xyXG4gICAgICAgICAgICBvcmllbnQ6ICd2ZXJ0aWNhbCcsXHJcbiAgICAgICAgICAgIGxlZnQ6ICdsZWZ0JyxcclxuICAgICAgICAgICAgZGF0YTogWydrY29yZScsJ290aGVyLXN1YmdyYXBoJyxdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXJpZXM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2tjb3JlJyxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdwaWUnLFxyXG4gICAgICAgICAgICAgICAgcmFkaXVzOiAnNTUlJyxcclxuICAgICAgICAgICAgICAgIGNlbnRlcjogWyc1MCUnLCAnNjAlJ10sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge3ZhbHVlOiB2YWx1ZTEsIG5hbWU6ICdrY29yZSd9LFxyXG4gICAgICAgICAgICAgICAgICAgIHt2YWx1ZTogdmFsdWUyLCBuYW1lOiAnb3RoZXItc3ViZ3JhcGgnfSxcclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICBlbXBoYXNpczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1TdHlsZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dCbHVyOiAxMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93T2Zmc2V0WDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93Q29sb3I6ICdyZ2JhKDAsIDAsIDAsIDAuNSknXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgfTtcclxuICAgIHNlbGYubXljaGFydC5zZXRPcHRpb24ob3B0aW9uKTtcclxufTtcclxuXHJcbkdyYXBoLnByb3RvdHlwZS5rQ29yZUJhciA9IGZ1bmN0aW9uIChkYXRhLHNpemUpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICB2YXIgb3B0aW9uID0ge1xyXG4gICAgICAgIHhBeGlzOiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdjYXRlZ29yeScsXHJcbiAgICAgICAgICAgIGRhdGE6IFsnYWxsLWdyYXBoJywna2NvcmUnXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeUF4aXM6IHtcclxuICAgICAgICAgICAgdHlwZTogJ3ZhbHVlJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2VyaWVzOiBbe1xyXG4gICAgICAgICAgICBkYXRhOiBbc2l6ZSwgZGF0YS5sZW5ndGhdLFxyXG4gICAgICAgICAgICB0eXBlOiAnYmFyJ1xyXG4gICAgICAgIH1dXHJcbiAgICB9O1xyXG4gICAgIHNlbGYubXljaGFydC5zZXRPcHRpb24ob3B0aW9uKTtcclxufTtcclxuXHJcbkdyYXBoLnByb3RvdHlwZS5jb21tdW5pdGllc1Zpc3VhbE1hcCA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgY29sb3JzID0gc2VsZi5jb2xvcnM7XHJcbiAgICBmb3IodmFyIGk9MDtpPGRhdGEubGVuZ3RoIC0xOyBpKyspe1xyXG4gICAgICAgIHZhciB0ZW1wID0gZGF0YVtpXTtcclxuICAgICAgICBmb3IodmFyIGo9MDsgajwgdGVtcC5sZW5ndGg7aisrKXtcclxuICAgICAgICAgICAgdmFyIG5vZGUgPSBzZWxmLmN5LiQoXCIjXCIgKyB0ZW1wW2pdKTtcclxuICAgICAgICAgICAgbm9kZS5zdHlsZSgnYmFja2dyb3VuZC1jb2xvcicsY29sb3JzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5HcmFwaC5wcm90b3R5cGUuY29tbXVuaXRpZXNEaWFncmFtID0gZnVuY3Rpb24gKGRhdGEsZGlhZ3JhbVR5cGUsdHlwZSkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICBpZihkaWFncmFtVHlwZT09J3BpZScpe1xyXG4gICAgICAgIHZhciBsZWdlbmREYXRhID0gW107XHJcbiAgICAgICAgdmFyIHNlcmllc0RhdGEgPSBbXTtcclxuICAgICAgICBmb3IodmFyIGk9MDtpPD1kYXRhLmxlbmd0aC0xO2krKyl7XHJcbiAgICAgICAgICAgIGxlZ2VuZERhdGEucHVzaCgoaSsxKS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgc2VyaWVzRGF0YS5wdXNoKHt2YWx1ZTpkYXRhW2ldLmxlbmd0aCxuYW1lOihpKzEpLnRvU3RyaW5nKCl9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG9wdGlvbiA9IHtcclxuICAgICAgICAgICAgdGl0bGU6IHtcclxuICAgICAgICAgICAgICAgIHRleHQ6ICdjb21tdW5pdHktcGllJyxcclxuICAgICAgICAgICAgICAgIGxlZnQ6ICdjZW50ZXInXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRvb2x0aXA6IHt9LFxyXG4gICAgICAgICAgICBsZWdlbmQ6IHtcclxuICAgICAgICAgICAgICAgIG9yaWVudDogJ3ZlcnRpY2FsJyxcclxuICAgICAgICAgICAgICAgIGxlZnQ6ICdsZWZ0JyxcclxuICAgICAgICAgICAgICAgIGRhdGE6IGxlZ2VuZERhdGFcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICBzZXJpZXM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogdHlwZSxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdwaWUnLFxyXG4gICAgICAgICAgICAgICAgcmFkaXVzOiAnNTUlJyxcclxuICAgICAgICAgICAgICAgIGNlbnRlcjogWyc1MCUnLCAnNTAlJ10sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBzZXJpZXNEYXRhLFxyXG4gICAgICAgICAgICAgICAgZW1waGFzaXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtU3R5bGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93Qmx1cjogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd09mZnNldFg6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd0NvbG9yOiAncmdiYSgwLCAwLCAwLCAwLjUpJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfV1cclxuICAgICAgICB9O1xyXG4gICAgfWVsc2UgaWYoZGlhZ3JhbVR5cGUgPT0gJ2Jhcicpe1xyXG4gICAgICAgIHZhciB4QXhpc0RhdGEgPSBbXTtcclxuICAgICAgICB2YXIgc2VyaWVzRGF0YSA9IFtdO1xyXG4gICAgICAgIGZvcih2YXIgaT0wO2k8PWRhdGEubGVuZ3RoLTE7aSsrKXtcclxuICAgICAgICAgICAgeEF4aXNEYXRhLnB1c2goaS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgc2VyaWVzRGF0YS5wdXNoKGRhdGFbaV0ubGVuZ3RoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG9wdGlvbiA9IHtcclxuICAgICAgICAgICAgdGl0bGU6e1xyXG4gICAgICAgICAgICAgICAgdGV4dDonY29tbXVuaXR5LXBpZScsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OidjZW50ZXInXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRvb2x0aXA6IHt9LFxyXG4gICAgICAgICAgICB4QXhpczoge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JyxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHhBeGlzRGF0YVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB5QXhpczoge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ3ZhbHVlJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXJpZXM6IFt7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiBzZXJpZXNEYXRhLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2JhcidcclxuICAgICAgICAgICAgfV1cclxuICAgICAgICB9O1xyXG4gICAgfWVsc2UgaWYoZGlhZ3JhbVR5cGUgPT0gJ3BpZStiYXInKXtcclxuICAgICAgICB2YXIgeEF4aXNEYXRhID0gW107XHJcbiAgICAgICAgdmFyIHNlcmllc0JhckRhdGEgPSBbXTtcclxuICAgICAgICB2YXIgc2VyaWVzUGllRGF0YSA9IFtdO1xyXG4gICAgICAgIGZvcih2YXIgaT0wO2k8PWRhdGEubGVuZ3RoLTE7aSsrKXtcclxuICAgICAgICAgICAgeEF4aXNEYXRhLnB1c2goaS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgc2VyaWVzQmFyRGF0YS5wdXNoKGRhdGFbaV0ubGVuZ3RoKTtcclxuICAgICAgICAgICAgc2VyaWVzUGllRGF0YS5wdXNoKHt2YWx1ZTpkYXRhW2ldLmxlbmd0aCxuYW1lOmkudG9TdHJpbmcoKX0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgb3B0aW9uID0ge1xyXG4gICAgICAgICAgICB0aXRsZTp7XHJcbiAgICAgICAgICAgICAgICB0ZXh0Oidjb21tdW5pdHktcGllK2JhcicsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OidjZW50ZXInXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRvb2x0aXA6IHtcclxuICAgICAgICAgICAgICAgIHRyaWdnZXI6ICdheGlzJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGVnZW5kOiBbe1xyXG4gICAgICAgICAgICAgICAgb3JpZW50OiAndmVydGljYWwnLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogJ2xlZnQnLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeEF4aXNEYXRhXHJcbiAgICAgICAgICAgIH0se1xyXG4gICAgICAgICAgICAgICAgb3JpZW50OiAndmVydGljYWwnLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogJ2xlZnQnLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeEF4aXNEYXRhXHJcbiAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICB4QXhpczoge3R5cGU6ICdjYXRlZ29yeSd9LFxyXG4gICAgICAgICAgICB5QXhpczoge2dyaWRJbmRleDogMH0sXHJcbiAgICAgICAgICAgIGdyaWQ6W3tcclxuICAgICAgICAgICAgICAgIHRvcDogJzUwJScsXHJcbiAgICAgICAgICAgICAgICBib3R0b206IDMwLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogMTAwLFxyXG4gICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgc2VyaWVzOiBbXHJcbiAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICB0eXBlOiAncGllJyxcclxuICAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VyaWVzUGllRGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAnMzAlJyxcclxuICAgICAgICAgICAgICAgICAgICAgY2VudGVyOlsnNTAlJywnMjUlJ11cclxuICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdiYXInLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlcmllc1BpZURhdGFcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBzZWxmLm15Y2hhcnQuc2V0T3B0aW9uKG9wdGlvbix0cnVlKTtcclxufTtcclxuXHJcbkdyYXBoLnByb3RvdHlwZS5kcmF3UGllID0gZnVuY3Rpb24gKGRhdGEsdHlwZSkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGluZm9zID0gW107XHJcbiAgICB2YXIgbWF4ID0gMDtcclxuICAgIGZvcih2YXIga2V5IGluIGRhdGEpe1xyXG4gICAgICAgIHZhciB0ZW1wID0gZGF0YVtrZXldXHJcbiAgICAgICAgaW5mb3MucHVzaCh0ZW1wKTtcclxuICAgICAgICBpZih0ZW1wID4gbWF4KXtcclxuICAgICAgICAgICAgbWF4ID0gdGVtcDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB2YXIgZGF0dW0gPSBbXTtcclxuICAgIGZvcih2YXIgaSA9IDE7IGk8PSBtYXg7aSsrKXtcclxuICAgICAgICBkYXR1bS5wdXNoKDApO1xyXG4gICAgfVxyXG4gICAgZm9yKHZhciBrZXkgaW4gaW5mb3Mpe1xyXG4gICAgICAgIHZhciB0ZW1wID0gaW5mb3Nba2V5XTtcclxuICAgICAgICBkYXR1bVt0ZW1wLTFdICs9MTtcclxuICAgIH1cclxuICAgIGluZm9zID0gW107XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gZGF0dW0pe1xyXG4gICAgICAgIGluZm9zLnB1c2goe1xyXG4gICAgICAgICAgICBuYW1lOiBwYXJzZUludChrZXkpICsgMSxcclxuICAgICAgICAgICAgdmFsdWU6ZGF0dW1ba2V5XVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgb3B0aW9uID0ge1xyXG4gICAgICAgIHRpdGxlOntcclxuICAgICAgICAgICAgdGV4dDp0eXBlLFxyXG4gICAgICAgICAgICBsZWZ0OidjZW50ZXInXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0b29sdGlwOiB7XHJcbiAgICAgICAgICAgIHRyaWdnZXI6ICdpdGVtJyxcclxuICAgICAgICAgICAgZm9ybWF0dGVyOlwie2J9OntjfVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXJpZXM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ3BpZScsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBpbmZvcyxcclxuICAgICAgICAgICAgICAgIGVtcGhhc2lzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbVN0eWxlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd0JsdXI6IDEwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dPZmZzZXRYOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dDb2xvcjogJ3JnYmEoMCwgMCwgMCwgMC41KSdcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF1cclxuICAgIH07XHJcbiAgICBzZWxmLm15Y2hhcnQuc2V0T3B0aW9uKG9wdGlvbix0cnVlKTtcclxufTtcclxuXHJcblxyXG5HcmFwaC5wcm90b3R5cGUudmlzdWFsQ29sb3JNYXBwaW5nID0gZnVuY3Rpb24gKHR5cGUsIGlzX25vZGUpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIGlmIChpc19ub2RlID09ICdOb2RlJykge1xyXG4gICAgICAgIC8v54K555qE6aKc6Imy5pig5bCEXHJcbiAgICAgICAgdmFyIG1heCA9IHNlbGYuY3kubm9kZXMoKS5tYXgoZnVuY3Rpb24gKGVsZSwgaSwgZWxlcykge1xyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChlbGUuZGF0YSh0eXBlKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIG1pbiA9IHNlbGYuY3kubm9kZXMoKS5taW4oZnVuY3Rpb24gKGVsZSwgaSwgZWxlcykge1xyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChlbGUuZGF0YSh0eXBlKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbWF4ID0gbWF4Wyd2YWx1ZSddO1xyXG4gICAgICAgIG1pbiA9IG1pblsndmFsdWUnXTtcclxuICAgICAgICBzZWxmLmN5Lm5vZGVzKCkuZm9yRWFjaChmdW5jdGlvbiAoZWxlLCBpLCBlbGVzKSB7XHJcbiAgICAgICAgICAgIGlmKGVsZS5pc1BhcmVudCgpKXtcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciB3ZWlnaHQgPSBwYXJzZUZsb2F0KGVsZS5kYXRhKHR5cGUpKTtcclxuICAgICAgICAgICAgLy9tYXggPSAjZmYwMDAwXHJcbiAgICAgICAgICAgIC8vbWluID0gI2ZmZmYwMFxyXG4gICAgICAgICAgICB3ZWlnaHQgPSBwYXJzZUludCgoKHdlaWdodCAtIG1pbikgLyBtYXgpICogMjU1KTtcclxuICAgICAgICAgICAgd2VpZ2h0ID0gMjU1IC0gd2VpZ2h0O1xyXG4gICAgICAgICAgICBpZiAod2VpZ2h0IDw9IDE1KSB7XHJcbiAgICAgICAgICAgICAgICB3ZWlnaHQgPSB3ZWlnaHQudG9TdHJpbmcoMTYpO1xyXG4gICAgICAgICAgICAgICAgd2VpZ2h0ID0gXCIjXCIgKyBcImZmMFwiICsgd2VpZ2h0ICsgJzAwJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdlaWdodCA9IHdlaWdodC50b1N0cmluZygxNik7XHJcbiAgICAgICAgICAgICAgICB3ZWlnaHQgPSBcIiNcIiArIFwiZmZcIiArIHdlaWdodCArICcwMCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxlLnN0eWxlKCdiYWNrZ3JvdW5kLWNvbG9yJywgd2VpZ2h0KTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy/nur/nmoTpopzoibLmmKDlsIRcclxuICAgICAgICB2YXIgbWF4ID0gc2VsZi5jeS5lZGdlcygpLm1heChmdW5jdGlvbiAoZWxlLCBpLCBlbGVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KGVsZS5kYXRhKHR5cGUpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgbWluID0gc2VsZi5jeS5lZGdlcygpLm1pbihmdW5jdGlvbiAoZWxlLCBpLCBlbGVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KGVsZS5kYXRhKHR5cGUpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBtYXggPSBtYXhbJ3ZhbHVlJ107XHJcbiAgICAgICAgbWluID0gbWluWyd2YWx1ZSddO1xyXG4gICAgICAgIHNlbGYuY3kuZWRnZXMoKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUsIGksIGVsZXMpIHtcclxuICAgICAgICAgICAgdmFyIHdlaWdodCA9IHBhcnNlRmxvYXQoZWxlLmRhdGEodHlwZSkpO1xyXG4gICAgICAgICAgICAvL21heCA9ICNmZjAwMDBcclxuICAgICAgICAgICAgLy9taW4gPSAjZmZmZjAwXHJcbiAgICAgICAgICAgIHdlaWdodCA9IHBhcnNlSW50KCgod2VpZ2h0IC0gbWluKSAvIG1heCkgKiAyNTUpO1xyXG4gICAgICAgICAgICB3ZWlnaHQgPSAyNTUgLSB3ZWlnaHQ7XHJcbiAgICAgICAgICAgIGlmICh3ZWlnaHQgPD0gMTUpIHtcclxuICAgICAgICAgICAgICAgIHdlaWdodCA9IHdlaWdodC50b1N0cmluZygxNik7XHJcbiAgICAgICAgICAgICAgICB3ZWlnaHQgPSBcIiNcIiArIFwiZmYwXCIgKyB3ZWlnaHQgKyAnMDAnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgd2VpZ2h0ID0gd2VpZ2h0LnRvU3RyaW5nKDE2KTtcclxuICAgICAgICAgICAgICAgIHdlaWdodCA9IFwiI1wiICsgXCJmZlwiICsgd2VpZ2h0ICsgJzAwJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbGUuc3R5bGUoJ2xpbmUtY29sb3InLCB3ZWlnaHQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuR3JhcGgucHJvdG90eXBlLmVudGlyZVZpc3VhbE1hcHBpbmcgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIG1pbiA9IGRhdGFbMF07XHJcbiAgICB2YXIgbWF4ID0gZGF0YVswXTtcclxuICAgIGZvcih2YXIgaT0gMTtpIDwgZGF0YS5sZW5ndGgtMSAgO2krKyl7XHJcbiAgICAgICAgaWYobWluID4gZGF0YVtpXSl7XHJcbiAgICAgICAgICAgIG1pbiA9IGRhdGFbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKG1heCA8IGRhdGFbaV0pe1xyXG4gICAgICAgICAgICBtYXggPSBkYXRhW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNlbGYuY3kubm9kZXMoKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUsIGksIGVsZXMpIHtcclxuICAgICAgICBpZihlbGUuaXNQYXJlbnQoKSl7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgd2VpZ2h0ID0gZGF0YVtpXTtcclxuICAgICAgICB3ZWlnaHQgPSBwYXJzZUludCgoKHdlaWdodCAtIG1pbikgLyBtYXgpICogMjU1KTtcclxuICAgICAgICB3ZWlnaHQgPSAyNTUgLSB3ZWlnaHQ7XHJcbiAgICAgICAgaWYgKHdlaWdodCA8PSAxNSkge1xyXG4gICAgICAgICAgICB3ZWlnaHQgPSB3ZWlnaHQudG9TdHJpbmcoMTYpO1xyXG4gICAgICAgICAgICB3ZWlnaHQgPSBcIiNcIiArIFwiZmYwXCIgKyB3ZWlnaHQgKyAnMDAnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHdlaWdodCA9IHdlaWdodC50b1N0cmluZygxNik7XHJcbiAgICAgICAgICAgIHdlaWdodCA9IFwiI1wiICsgXCJmZlwiICsgd2VpZ2h0ICsgJzAwJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxlLnN0eWxlKCdiYWNrZ3JvdW5kLWNvbG9yJywgd2VpZ2h0KTtcclxuICAgIH0pO1xyXG5cclxufTtcclxuIl19
