Graph.prototype.initMapChannel=function(){var a=this;a.mapChannel.change(function(){switch($(this).val()){case"Size":a.mapColorBox.hide(),a.mapSizeBox.show();break;case"Color":a.mapColorBox.show(),a.mapSizeBox.hide();break;default:a.mapColorBox.hide(),a.mapSizeBox.hide()}}),a.colorSelector.change(function(){switch($(this).val()){case"viridis":a.gradientRamp.css("background-image","linear-gradient(to right, rgba(68,1,84,1),rgba(54,90,140,1),rgba(30,151,139,1),rgba(254,231,36,1))");break;case"plasma":a.gradientRamp.css("background-image","linear-gradient(to right, rgba(12,7,135,1),rgba(99,0,167,1),rgba(254,188,43,1),rgba(240,249,33,1))");break;case"inferno":a.gradientRamp.css("background-image","linear-gradient(to right, rgba(0,0,0,1),rgba(111,24,110,1),rgba(252,150,6,1),rgba(253,255,165,1))");break;case"magma":a.gradientRamp.css("background-image","linear-gradient(to right, rgba(0,0,0,1),rgba(121,34,130,1),rgba(246,107,92,1),rgba(253,253,191,1))");break;case"cividis":a.gradientRamp.css("background-image","linear-gradient(to right, rgba(0,34,78,1),rgba(0,50,113,1),rgba(120,120,119,1),rgba(254,232,54,1))");break;case"Oranges":a.gradientRamp.css("background-image","linear-gradient(to right, rgba(255,245,235,1),rgba(250,130,47,1),rgba(218,73,1,1),rgba(127,39,1,1))");break;case"YlGn":a.gradientRamp.css("background-image","linear-gradient(to right, rgba(255,255,299,1),rgba(180,224,145,1),rgba(0,104,55,1),rgba(0,69,41,1))");break;case"binary":a.gradientRamp.css("background-image","linear-gradient(to right, rgba(255,255,255,1),rgba(200,200,200,1),rgba(120,120,120,1),rgba(0,0,0,1))");break;case"hot":a.gradientRamp.css("background-image","linear-gradient(to right, rgba(10,0,0,1),rgba(255,0,0,1),rgba(255,255,0,1),rgba(255,255,255,1))");break;case"copper":a.gradientRamp.css("background-image","linear-gradient(to right, rgba(0,0,0,1),rgba(100,63,40,1),rgba(256,162,103,1),rgba(255,199,127,1))")}})},Graph.prototype.visualMap=function(a,e){var i=this,r=i.mapChannel.val(),g=i.mapChannel.val();switch(r){case"Size":var t=i.maxSizeInput.val(),n=i.minSizeInput.val();if(!(""!=t&""!=n))return;r+="?",r+=t,r+="?",r+=n;break;case"Color":r+="?",r+=i.colorSelector.val()}r+="?",r+=i.mapNormalization.val(),wnatajax.get({url:"/analysis/visualmap/",data:{id:i.id,map:r,type:a,is_node:e},success:function(a){if(200==a.code){var r=JSON.parse(a.data);i.handleVisualMap(r,g,e)}},fail:function(a){}})},Graph.prototype.handleVisualMap=function(i,a,r){var e=this;"Color"===a?"Node"===r?e.cy.filter(":child").forEach(function(a,r,e){a.style("background-color",i[r])}):e.cy.edges().forEach(function(a,r,e){a.style("line-color",i[r])}):"Size"===a?"Node"===r?e.cy.filter(":child").forEach(function(a,r,e){a.style("width",i[r]),a.style("height",i[r])}):e.cy.edges().forEach(function(a,r,e){a.style("width",i[r])}):"Opacity"===a&&("Node"===r?e.cy.filter(":child").forEach(function(a,r,e){a.style("opacity",i[r])}):e.cy.edges().forEach(function(a,r,e){a.style("opacity",i[r])}))};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpc3VhbE1hcC5qcyJdLCJuYW1lcyI6WyJHcmFwaCIsInByb3RvdHlwZSIsImluaXRNYXBDaGFubmVsIiwic2VsZiIsInRoaXMiLCJtYXBDaGFubmVsIiwiY2hhbmdlIiwiJCIsInZhbCIsIm1hcENvbG9yQm94IiwiaGlkZSIsIm1hcFNpemVCb3giLCJzaG93IiwiY29sb3JTZWxlY3RvciIsImdyYWRpZW50UmFtcCIsImNzcyIsInZpc3VhbE1hcCIsInR5cGUiLCJpc19ub2RlIiwiY2hhbm5lbCIsIm1heFZhbHVlIiwibWF4U2l6ZUlucHV0IiwibWluVmFsdWUiLCJtaW5TaXplSW5wdXQiLCJtYXBOb3JtYWxpemF0aW9uIiwid25hdGFqYXgiLCJnZXQiLCJ1cmwiLCJkYXRhIiwiaWQiLCJtYXAiLCJzdWNjZXNzIiwicmVzdWx0IiwiSlNPTiIsInBhcnNlIiwiaGFuZGxlVmlzdWFsTWFwIiwiZmFpbCIsImN5IiwiZmlsdGVyIiwiZm9yRWFjaCIsImVsZSIsImkiLCJlbGVzIiwic3R5bGUiLCJlZGdlcyJdLCJtYXBwaW5ncyI6IkFBQUFBLE1BQU1DLFVBQVVDLGVBQWlCLFdBQzdCLElBQUlDLEVBQU9DLEtBQ1hELEVBQUtFLFdBQVdDLE9BQU8sV0FHcEIsT0FGVUMsRUFBRUgsTUFDSUksT0FFWixJQUFLLE9BQ0RMLEVBQUtNLFlBQVlDLE9BQ2pCUCxFQUFLUSxXQUFXQyxPQUNoQixNQUVKLElBQUssUUFDRFQsRUFBS00sWUFBWUcsT0FDakJULEVBQUtRLFdBQVdELE9BQ2hCLE1BRUosUUFDSVAsRUFBS00sWUFBWUMsT0FDakJQLEVBQUtRLFdBQVdELFVBSzNCUCxFQUFLVSxjQUFjUCxPQUFPLFdBR3RCLE9BRlNDLEVBQUVILE1BQ0lJLE9BRVgsSUFBSyxVQUNETCxFQUFLVyxhQUFhQyxJQUFJLG1CQUFtQixzR0FDekMsTUFDSCxJQUFLLFNBQ0ZaLEVBQUtXLGFBQWFDLElBQUksbUJBQW1CLHNHQUN6QyxNQUNILElBQUssVUFDRlosRUFBS1csYUFBYUMsSUFBSSxtQkFBbUIscUdBQ3pDLE1BQ0gsSUFBSyxRQUNGWixFQUFLVyxhQUFhQyxJQUFJLG1CQUFtQixzR0FDekMsTUFDSCxJQUFLLFVBQ0ZaLEVBQUtXLGFBQWFDLElBQUksbUJBQW1CLHNHQUN6QyxNQUNILElBQUssVUFDRlosRUFBS1csYUFBYUMsSUFBSSxtQkFBbUIsdUdBQ3pDLE1BQ0gsSUFBSyxPQUNGWixFQUFLVyxhQUFhQyxJQUFJLG1CQUFtQix1R0FDekMsTUFDSCxJQUFLLFNBQ0ZaLEVBQUtXLGFBQWFDLElBQUksbUJBQW1CLHdHQUN6QyxNQUNILElBQUssTUFDRlosRUFBS1csYUFBYUMsSUFBSSxtQkFBbUIsbUdBQ3pDLE1BQ0gsSUFBSyxTQUNGWixFQUFLVyxhQUFhQyxJQUFJLG1CQUFtQiwwR0FTekRmLE1BQU1DLFVBQVVlLFVBQVksU0FBVUMsRUFBS0MsR0FDdkMsSUFBSWYsRUFBT0MsS0FDUEMsRUFBYUYsRUFBS0UsV0FBV0csTUFDN0JXLEVBQVVoQixFQUFLRSxXQUFXRyxNQUM5QixPQUFRSCxHQUNKLElBQUssT0FDRCxJQUFJZSxFQUFXakIsRUFBS2tCLGFBQWFiLE1BQzdCYyxFQUFXbkIsRUFBS29CLGFBQWFmLE1BQ2pDLEtBQWEsSUFBVlksRUFBdUIsSUFBVkUsR0FNWixPQUxBakIsR0FBYSxJQUNiQSxHQUFhZSxFQUNiZixHQUFhLElBQ2JBLEdBQWFpQixFQUlqQixNQUNILElBQUssUUFDRmpCLEdBQWEsSUFDYkEsR0FBY0YsRUFBS1UsY0FBY0wsTUFNekNILEdBQWEsSUFDYkEsR0FBYUYsRUFBS3FCLGlCQUFpQmhCLE1BQ25DaUIsU0FBU0MsSUFBSSxDQUNUQyxJQUFNLHVCQUNOQyxLQUFPLENBQ0hDLEdBQUsxQixFQUFLMEIsR0FDVkMsSUFBTXpCLEVBQ05ZLEtBQU9BLEVBQ1BDLFFBQVVBLEdBQ1phLFFBQVUsU0FBVUMsR0FDbEIsR0FBbUIsS0FBaEJBLEVBQWEsS0FBTyxDQUNuQixJQUFJSixFQUFPSyxLQUFLQyxNQUFNRixFQUFhLE1BQ25DN0IsRUFBS2dDLGdCQUFnQlAsRUFBS1QsRUFBUUQsS0FFeENrQixLQUFPLFNBQVVKLFFBTzNCaEMsTUFBTUMsVUFBVWtDLGdCQUFrQixTQUFVUCxFQUFLVCxFQUFRRCxHQUNyRCxJQUFJZixFQUFPQyxLQUNNLFVBQVZlLEVBQ2MsU0FBVkQsRUFDQ2YsRUFBS2tDLEdBQUdDLE9BQU8sVUFBVUMsUUFBUSxTQUFVQyxFQUFJQyxFQUFFQyxHQUM3Q0YsRUFBSUcsTUFBTSxtQkFBbUJmLEVBQUthLE1BR3RDdEMsRUFBS2tDLEdBQUdPLFFBQVFMLFFBQVEsU0FBVUMsRUFBSUMsRUFBRUMsR0FDcENGLEVBQUlHLE1BQU0sYUFBYWYsRUFBS2EsTUFHckIsU0FBVnRCLEVBQ1EsU0FBVkQsRUFDQ2YsRUFBS2tDLEdBQUdDLE9BQU8sVUFBVUMsUUFBUSxTQUFVQyxFQUFJQyxFQUFFQyxHQUM3Q0YsRUFBSUcsTUFBTSxRQUFRZixFQUFLYSxJQUN2QkQsRUFBSUcsTUFBTSxTQUFTZixFQUFLYSxNQUc1QnRDLEVBQUtrQyxHQUFHTyxRQUFRTCxRQUFRLFNBQVVDLEVBQUlDLEVBQUVDLEdBQ3BDRixFQUFJRyxNQUFNLFFBQVFmLEVBQUthLE1BR2hCLFlBQVZ0QixJQUNRLFNBQVZELEVBQ0NmLEVBQUtrQyxHQUFHQyxPQUFPLFVBQVVDLFFBQVEsU0FBVUMsRUFBSUMsRUFBRUMsR0FDN0NGLEVBQUlHLE1BQU0sVUFBVWYsRUFBS2EsTUFHN0J0QyxFQUFLa0MsR0FBR08sUUFBUUwsUUFBUSxTQUFVQyxFQUFJQyxFQUFFQyxHQUNwQ0YsRUFBSUcsTUFBTSxVQUFVZixFQUFLYSIsImZpbGUiOiJ2aXN1YWxNYXAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiR3JhcGgucHJvdG90eXBlLmluaXRNYXBDaGFubmVsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5tYXBDaGFubmVsLmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGl0ID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdmFsdWUgPSBpdC52YWwoKTtcclxuICAgICAgIHN3aXRjaCAodmFsdWUpIHtcclxuICAgICAgICAgICBjYXNlIFwiU2l6ZVwiOntcclxuICAgICAgICAgICAgICAgc2VsZi5tYXBDb2xvckJveC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgIHNlbGYubWFwU2l6ZUJveC5zaG93KCk7XHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgICBjYXNlIFwiQ29sb3JcIjp7XHJcbiAgICAgICAgICAgICAgIHNlbGYubWFwQ29sb3JCb3guc2hvdygpO1xyXG4gICAgICAgICAgICAgICBzZWxmLm1hcFNpemVCb3guaGlkZSgpO1xyXG4gICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgZGVmYXVsdDp7XHJcbiAgICAgICAgICAgICAgIHNlbGYubWFwQ29sb3JCb3guaGlkZSgpO1xyXG4gICAgICAgICAgICAgICBzZWxmLm1hcFNpemVCb3guaGlkZSgpO1xyXG4gICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHNlbGYuY29sb3JTZWxlY3Rvci5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpdCA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gaXQudmFsKCk7XHJcbiAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwidmlyaWRpc1wiOntcclxuICAgICAgICAgICAgICAgIHNlbGYuZ3JhZGllbnRSYW1wLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIixcImxpbmVhci1ncmFkaWVudCh0byByaWdodCwgcmdiYSg2OCwxLDg0LDEpLHJnYmEoNTQsOTAsMTQwLDEpLHJnYmEoMzAsMTUxLDEzOSwxKSxyZ2JhKDI1NCwyMzEsMzYsMSkpXCIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1jYXNlIFwicGxhc21hXCI6e1xyXG4gICAgICAgICAgICAgICAgc2VsZi5ncmFkaWVudFJhbXAuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFwibGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZ2JhKDEyLDcsMTM1LDEpLHJnYmEoOTksMCwxNjcsMSkscmdiYSgyNTQsMTg4LDQzLDEpLHJnYmEoMjQwLDI0OSwzMywxKSlcIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfWNhc2UgXCJpbmZlcm5vXCI6e1xyXG4gICAgICAgICAgICAgICAgc2VsZi5ncmFkaWVudFJhbXAuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFwibGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZ2JhKDAsMCwwLDEpLHJnYmEoMTExLDI0LDExMCwxKSxyZ2JhKDI1MiwxNTAsNiwxKSxyZ2JhKDI1MywyNTUsMTY1LDEpKVwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9Y2FzZSBcIm1hZ21hXCI6e1xyXG4gICAgICAgICAgICAgICAgc2VsZi5ncmFkaWVudFJhbXAuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFwibGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZ2JhKDAsMCwwLDEpLHJnYmEoMTIxLDM0LDEzMCwxKSxyZ2JhKDI0NiwxMDcsOTIsMSkscmdiYSgyNTMsMjUzLDE5MSwxKSlcIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfWNhc2UgXCJjaXZpZGlzXCI6e1xyXG4gICAgICAgICAgICAgICAgc2VsZi5ncmFkaWVudFJhbXAuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFwibGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZ2JhKDAsMzQsNzgsMSkscmdiYSgwLDUwLDExMywxKSxyZ2JhKDEyMCwxMjAsMTE5LDEpLHJnYmEoMjU0LDIzMiw1NCwxKSlcIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfWNhc2UgXCJPcmFuZ2VzXCI6e1xyXG4gICAgICAgICAgICAgICAgc2VsZi5ncmFkaWVudFJhbXAuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFwibGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZ2JhKDI1NSwyNDUsMjM1LDEpLHJnYmEoMjUwLDEzMCw0NywxKSxyZ2JhKDIxOCw3MywxLDEpLHJnYmEoMTI3LDM5LDEsMSkpXCIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1jYXNlIFwiWWxHblwiOntcclxuICAgICAgICAgICAgICAgIHNlbGYuZ3JhZGllbnRSYW1wLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIixcImxpbmVhci1ncmFkaWVudCh0byByaWdodCwgcmdiYSgyNTUsMjU1LDI5OSwxKSxyZ2JhKDE4MCwyMjQsMTQ1LDEpLHJnYmEoMCwxMDQsNTUsMSkscmdiYSgwLDY5LDQxLDEpKVwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9Y2FzZSBcImJpbmFyeVwiOntcclxuICAgICAgICAgICAgICAgIHNlbGYuZ3JhZGllbnRSYW1wLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIixcImxpbmVhci1ncmFkaWVudCh0byByaWdodCwgcmdiYSgyNTUsMjU1LDI1NSwxKSxyZ2JhKDIwMCwyMDAsMjAwLDEpLHJnYmEoMTIwLDEyMCwxMjAsMSkscmdiYSgwLDAsMCwxKSlcIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfWNhc2UgXCJob3RcIjp7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmdyYWRpZW50UmFtcC5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsXCJsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsIHJnYmEoMTAsMCwwLDEpLHJnYmEoMjU1LDAsMCwxKSxyZ2JhKDI1NSwyNTUsMCwxKSxyZ2JhKDI1NSwyNTUsMjU1LDEpKVwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9Y2FzZSBcImNvcHBlclwiOntcclxuICAgICAgICAgICAgICAgIHNlbGYuZ3JhZGllbnRSYW1wLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIixcImxpbmVhci1ncmFkaWVudCh0byByaWdodCwgcmdiYSgwLDAsMCwxKSxyZ2JhKDEwMCw2Myw0MCwxKSxyZ2JhKDI1NiwxNjIsMTAzLDEpLHJnYmEoMjU1LDE5OSwxMjcsMSkpXCIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1kZWZhdWx0IDp7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuR3JhcGgucHJvdG90eXBlLnZpc3VhbE1hcCA9IGZ1bmN0aW9uICh0eXBlLGlzX25vZGUpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBtYXBDaGFubmVsID0gc2VsZi5tYXBDaGFubmVsLnZhbCgpO1xyXG4gICAgdmFyIGNoYW5uZWwgPSBzZWxmLm1hcENoYW5uZWwudmFsKCk7XHJcbiAgICBzd2l0Y2ggKG1hcENoYW5uZWwpIHtcclxuICAgICAgICBjYXNlIFwiU2l6ZVwiOntcclxuICAgICAgICAgICAgdmFyIG1heFZhbHVlID0gc2VsZi5tYXhTaXplSW5wdXQudmFsKCk7XHJcbiAgICAgICAgICAgIHZhciBtaW5WYWx1ZSA9IHNlbGYubWluU2l6ZUlucHV0LnZhbCgpO1xyXG4gICAgICAgICAgICBpZihtYXhWYWx1ZSE9XCJcIiZtaW5WYWx1ZSE9XCJcIil7XHJcbiAgICAgICAgICAgICAgICBtYXBDaGFubmVsICs9XCI/XCI7XHJcbiAgICAgICAgICAgICAgICBtYXBDaGFubmVsICs9bWF4VmFsdWU7XHJcbiAgICAgICAgICAgICAgICBtYXBDaGFubmVsICs9XCI/XCI7XHJcbiAgICAgICAgICAgICAgICBtYXBDaGFubmVsICs9bWluVmFsdWU7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1jYXNlIFwiQ29sb3JcIjp7XHJcbiAgICAgICAgICAgIG1hcENoYW5uZWwgKz1cIj9cIjtcclxuICAgICAgICAgICAgbWFwQ2hhbm5lbCArPSBzZWxmLmNvbG9yU2VsZWN0b3IudmFsKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1jYXNlIFwiT3BhY2l0eVwiOntcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbWFwQ2hhbm5lbCArPVwiP1wiO1xyXG4gICAgbWFwQ2hhbm5lbCArPXNlbGYubWFwTm9ybWFsaXphdGlvbi52YWwoKTtcclxuICAgIHduYXRhamF4LmdldCh7XHJcbiAgICAgICAgJ3VybCc6Jy9hbmFseXNpcy92aXN1YWxtYXAvJyxcclxuICAgICAgICAnZGF0YSc6e1xyXG4gICAgICAgICAgICAnaWQnOnNlbGYuaWQsXHJcbiAgICAgICAgICAgICdtYXAnOm1hcENoYW5uZWwsXHJcbiAgICAgICAgICAgICd0eXBlJzp0eXBlLFxyXG4gICAgICAgICAgICAnaXNfbm9kZSc6aXNfbm9kZVxyXG4gICAgICAgIH0sJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ109PTIwMCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UocmVzdWx0WydkYXRhJ10pO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVWaXN1YWxNYXAoZGF0YSxjaGFubmVsLGlzX25vZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwnZmFpbCc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59O1xyXG5cclxuXHJcbkdyYXBoLnByb3RvdHlwZS5oYW5kbGVWaXN1YWxNYXAgPSBmdW5jdGlvbiAoZGF0YSxjaGFubmVsLGlzX25vZGUpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBpZihjaGFubmVsPT09XCJDb2xvclwiKXtcclxuICAgICAgICAgICAgaWYoaXNfbm9kZT09PVwiTm9kZVwiKXtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3kuZmlsdGVyKFwiOmNoaWxkXCIpLmZvckVhY2goZnVuY3Rpb24gKGVsZSxpLGVsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGUuc3R5bGUoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsZGF0YVtpXSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmN5LmVkZ2VzKCkuZm9yRWFjaChmdW5jdGlvbiAoZWxlLGksZWxlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZS5zdHlsZShcImxpbmUtY29sb3JcIixkYXRhW2ldKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2UgaWYoY2hhbm5lbD09PVwiU2l6ZVwiKXtcclxuICAgICAgICAgICAgaWYoaXNfbm9kZT09PVwiTm9kZVwiKXtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3kuZmlsdGVyKFwiOmNoaWxkXCIpLmZvckVhY2goZnVuY3Rpb24gKGVsZSxpLGVsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGUuc3R5bGUoXCJ3aWR0aFwiLGRhdGFbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZS5zdHlsZShcImhlaWdodFwiLGRhdGFbaV0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jeS5lZGdlcygpLmZvckVhY2goZnVuY3Rpb24gKGVsZSxpLGVsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGUuc3R5bGUoXCJ3aWR0aFwiLGRhdGFbaV0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZSBpZihjaGFubmVsPT09XCJPcGFjaXR5XCIpe1xyXG4gICAgICAgICAgICBpZihpc19ub2RlPT09XCJOb2RlXCIpe1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jeS5maWx0ZXIoXCI6Y2hpbGRcIikuZm9yRWFjaChmdW5jdGlvbiAoZWxlLGksZWxlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZS5zdHlsZShcIm9wYWNpdHlcIixkYXRhW2ldKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3kuZWRnZXMoKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUsaSxlbGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlLnN0eWxlKFwib3BhY2l0eVwiLGRhdGFbaV0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbn07Il19
